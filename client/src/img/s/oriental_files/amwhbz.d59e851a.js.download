(this.$WP=this.$WP||[]).push(["amwhbz",(e,a)=>{var t,i,n,r,o,l,d,u,m,c,s,v,p,h,g,b,f,C,I,_,w,y,M,P,k,x,T,S,z,A,j,L,O,E,N,B,R,Z,q,F,V,H,J=e=>{var a=e.map(e=>new h(e.latitude,e.longitude));return a.length?g.fromArray(a):null},X=e=>{if(e.locationItem?.object?.locationV2?.tags?.tags.find(e=>e?.tagId===11066))return _;switch(e.placeType){case"ATTRACTION":var a=e.locationItem?.object?.locationV2?.tags?.tags?.[0]?.tagId;return a?M(a,f):f;case"EATERY":return w;case"ACCOMMODATION":if(e.locationItem?.object?.accommodationCategory==="VR")return y;return C;default:return I}},D=({title:e,cardLink:a,thumbnail:n,reviewSummary:r,isSaveEnabled:o,location:l,onSaveChange:d})=>{var u=r&&null!==r.rating&&null!==r.count?{rating:r.rating,reviewCount:r.count}:void 0,m=o&&l?.locationId?t(q,{size:"small",id:l.locationId,onSaveComplete:d,onUnsaveComplete:d,dataAttributes:{"data-automation":"trip_map_item_card_save_button"}}):null,c=t(R,{title:t(O,{variant:"title-04",lineClamp:2,dataAttributes:{"data-automation":"trip_map_item_card_title"},children:e}),href:a,bubbleRating:u,bareTitle:!0}),s=t("div",{"data-automation":"trip_map_item_card_image",className:"_Z",children:i(E,{roundedCorners:!0,children:[t(L,{source:n,height:"100%"}),m&&t(j,{children:m})]})});return t("div",{className:"xwPPX Gi Pj PX Pw PJ","data-automation":"trip_map_item_card",children:t(N,{header:c,media:s,variant:"horizontal",mediaLayout:{type:"FlexMediaHorizontalMinHeight",height:85},container:"small",children:l?.placeType&&t(B,{children:t("data",{"data-automation":"trip_map_item_card_place_type",children:t(P,{item:l,variant:"minimal"})})})})})},G=e=>{var{refetch:a}=Z();return t(D,{...e,onSaveChange:a})},W={x:0,y:8},Y=({location:e,isSelected:a,isCardDisabled:n,isSaveEnabled:l,onClick:d,onMouseEnter:u,onMouseLeave:m})=>{var c=A(),s=r(()=>new h(e.latitude,e.longitude),[e]),v=a?T.markerSelected:void 0,p=o(()=>{d?.(e.itemId)},[d,e.itemId]);return i(S,{position:s,zIndexOffset:v,onMouseEnter:o(()=>{u?.(e.itemId)},[u,e.itemId]),onMouseLeave:m,onClick:p,trackingContext:void 0,alignment:"top-center",children:[t("div",{"data-automation":"trip_map_marker",children:t(a?k:x,{icon:X(e),ariaAttributes:{},saved:e.isSaved||!1})}),a&&!n&&t(z,{direction:"bottom",offset:W,isRtl:c,autoPan:!1,visible:!0,zIndexOffset:T.clickPopup,children:t(F,{title:e.name,thumbnail:e.thumbnail,cardLink:e.url||void 0,reviewSummary:e.reviewSummary,isSaveEnabled:l,location:e.locationItem?.object})})]})},$=({children:e})=>{var[a,i]=l(null),n=r(()=>({selectedItemId:a,setSelectedItemId:i}),[a,i]);return t(H.Provider,{value:n,children:e})},Q=()=>{var e=d(H);if(null==e)throw Error("useTripsMapContext used when not inside of a TripsMapProvider");return e},U={container:"dtvBQ w _Z",loadingBar:"sxylT t w",loadingOverlay:"skzdP t w _Z Gv",card:"LiXhJ",cardAboveFab:"njYkA",zoomControl:"tkTJu"},K=({latitude:e,longitude:a,geoId:n,locations:d,loading:u,hideLoadingIndicator:g=!1,cardPositioning:f="pin",isSaveEnabled:C,initialZoom:I=13,children:_,onZoomChange:w,onPinClick:y,withRefetch:M})=>{var P="MOBILE"===s(),{selectedItemId:k,setSelectedItemId:x}=Q(),[T,S]=l(null),[z]=l(()=>{var t=J(d);if(t){var{southwest:i,northeast:n}=t;return new h((i.lat+n.lat)/2,(i.lng+n.lng)/2)}return new h(e,a)}),A=o(e=>{x(e),y?.(e)},[y,x]);m(()=>{if(T&&d.length>0){var e=J(d);e&&T.setBounds(e)}},[T,d]);var j=r(()=>d.find(e=>e.itemId===k),[d,k]);m(()=>{T&&k&&j&&T.setCenter(new h(j.latitude,j.longitude))},[T,k,j]);var L=M?G:F;return i("div",{className:U.container,"data-automation":"trip_map_item_map",children:[i(v,{initialCenter:z,initialZoom:I,geoId:n,onLoad:e=>{if(d.length>0){var a=J(d);a&&e.map?.setBounds(a)}S(e.map)},onClick:()=>{x(null)},onZoomChange:w,children:[(u||!T)&&!g&&t("div",{className:U.loadingBar,children:t(p,{})}),!P&&!u&&t("div",{className:U.zoomControl,children:t(b,{variant:"Circle"})}),d.map(e=>t(V,{location:e,isSelected:e.itemId===k,isSaveEnabled:C,isCardDisabled:"pin"!==f,onClick:A},e.itemId)),("map-bottom"===f||"above-fab"===f)&&j&&t("div",{className:c(U.card,{[U.cardAboveFab]:"above-fab"===f}),children:t(L,{title:j.name,thumbnail:j.thumbnail,cardLink:j.url||void 0,reviewSummary:j.reviewSummary,location:j.locationItem?.object,isSaveEnabled:C})}),_]}),u&&t("div",{className:U.loadingOverlay})]})};return[()=>{F=D,V=n(Y),H=u({selectedItemId:null,setSelectedItemId:()=>{}}),e({TripsMapProvider:$,default:K,useTripsMapContext:Q})},[e=>(t=e.jsx,i=e.jsxs),e=>(n=e.memo,r=e.useMemo,o=e.useCallback,l=e.useState,d=e.useContext,u=e.createContext,m=e.useEffect),e=>c=e.default,e=>s=e.useViewportCategory,e=>v=e.MapComponent,e=>p=e.default,e=>(h=e.LatLng,g=e.LatLngBounds),e=>b=e.default,e=>f=e.default,e=>C=e.default,e=>I=e.default,e=>_=e.default,e=>w=e.default,e=>y=e.default,e=>(M=e.getAttractionIcon,P=e.TripLocationIconContent),e=>(k=e.ActiveMapPin,x=e.StandardMapPin),e=>T=e.default,e=>(S=e.Marker,z=e.Popup),e=>A=e.useRtl,e=>j=e.CardImageOverlay,e=>L=e.default,e=>O=e.default,e=>(E=e.CardMedia,N=e.FlexCard,B=e.CardContent,R=e.CardHeader),e=>Z=e.useTrip,e=>q=e.default]]},["121h32","1o4yt4","fkji80","1ys6v1","15xqg7","1ndszp","1jgmez","1us1vw","155nvb","1c5q3i","1bp96i","1o80y5","o3mm96","3aiijo","19l2zs","fm6nx5","1g6hko","49c7br","17thqz","1asj0s","34bu7w","1essqv","6m9vgr","1r6ayw","1dpzon"]]);
