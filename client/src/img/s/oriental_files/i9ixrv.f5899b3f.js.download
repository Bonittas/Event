(this.$WP=this.$WP||[]).push(["i9ixrv",(e,t)=>{function n(e,t){if(t.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function r(e){return n(1,arguments),!isNaN(function(e){n(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):(("string"==typeof e||"[object String]"===t)&&"undefined"!=typeof console&&Error().stack,new Date(NaN))}(e))}var i,a,u,o,s,l,c,d,f,p,m,b,g,h,_,D,y,C,N,v,S,A,P,T,E,w,O,R,I,U,k,M,x={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},F=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,L=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,q=/^([+-])(\d{2})(?::?(\d{2}))?$/;function B(e,t){n(1,arguments);var r,i,a=t||{},u=null==a.additionalDigits?2:function(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}(a.additionalDigits);if(2!==u&&1!==u&&0!==u)throw RangeError("additionalDigits must be 0, 1 or 2");if(!("string"==typeof e||"[object String]"===Object.prototype.toString.call(e)))return new Date(NaN);var o=function(e){var t,n={},r=e.split(x.dateTimeDelimiter);if(r.length>2)return n;if(/:/.test(r[0])?(n.date=null,t=r[0]):(n.date=r[0],t=r[1],x.timeZoneDelimiter.test(n.date)&&(n.date=e.split(x.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var i=x.timezone.exec(t);i?(n.time=t.replace(i[1],""),n.timezone=i[1]):n.time=t}return n}(e);if(o.date){var s=function(e,t){var n=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:null};var i=r[1]&&parseInt(r[1]),a=r[2]&&parseInt(r[2]);return{year:null==a?i:100*a,restDateString:e.slice((r[1]||r[2]).length)}}(o.date,u);r=function(e,t){if(null===t)return null;var n,r,i=e.match(F);if(!i)return null;var a=!!i[4],u=j(i[1]),o=j(i[2])-1,s=j(i[3]),l=j(i[4]),c=j(i[5])-1;if(a)return l>=1&&l<=53&&c>=0&&c<=6?((n=new Date(0)).setUTCFullYear(t,0,4),r=n.getUTCDay()||7,n.setUTCDate(n.getUTCDate()+((l-1)*7+c+1-r)),n):new Date(NaN);var d=new Date(0);return o>=0&&o<=11&&s>=1&&s<=(z[o]||(H(t)?29:28))&&u>=1&&u<=(H(t)?366:365)?(d.setUTCFullYear(t,o,Math.max(u,s)),d):new Date(NaN)}(s.restDateString,s.year)}if(isNaN(r)||!r)return new Date(NaN);var l=r.getTime(),c=0;if(o.time&&(isNaN(c=function(e){var t=e.match(L);if(!t)return null;var n=Y(t[1]),r=Y(t[2]),i=Y(t[3]);return(24===n?0===r&&0===i:i>=0&&i<60&&r>=0&&r<60&&n>=0&&n<25)?36e5*n+6e4*r+1e3*i:NaN}(o.time))||null===c))return new Date(NaN);if(o.timezone){if(isNaN(i=function(e){if("Z"===e)return 0;var t=e.match(q);if(!t)return 0;var n="+"===t[1]?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return i>=0&&i<=59?n*(36e5*r+6e4*i):NaN}(o.timezone)))return new Date(NaN)}else{var d=new Date(l+c),f=new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds());return f.setFullYear(d.getUTCFullYear()),f}return new Date(l+c+i)}function j(e){return e?parseInt(e):1}function Y(e){return e&&parseFloat(e.replace(",","."))||0}var z=[31,null,31,30,31,30,31,31,30,31,30,31];function H(e){return e%400==0||e%4==0&&e%100}var $={__key:0x7b7d4ad1bb35,id:"7b7d4ad1bb35ada18e3e83b9f64944f6",loc:{},definitions:[]},G=e=>{if(!e||!e.dueDate)return null;var t="number"==typeof e.totalAmount&&e.totalAmount>=0?e.totalAmount:null,{currencyCode:n}=e,i=e.dueDate?B(e.dueDate):null;return n&&t&&i&&r(i)?{totalAmount:t,currencyCode:n,dueDate:i}:null},V=e=>{if(!e)return null;var{totalAmount:t,currencyCode:n,discountAmount:r}=e,{discountAmount:i=0}=r||{discountAmount:0};return t&&n?{totalAmount:t,currencyCode:n,discountAmount:i,amountPaid:t-i}:null},W=e=>{if(!e)return{startDate:null,endDate:null,renewalDate:null,cancellationDate:null,autoRenew:!1,withinFullRefundCancellationPeriod:!1};var t=B(e.startDate),n=B(e.endDate),i=e.renewalDate?B(e.renewalDate):null,a=e.cancellationDate?B(e.cancellationDate):null;return{startDate:r(t)?t:null,endDate:r(n)?n:null,renewalDate:i&&r(i)?i:null,cancellationDate:a&&r(a)?a:null,autoRenew:e.autoRenew,withinFullRefundCancellationPeriod:e.withinFullRefundCancellationPeriod}},Z=e=>{var t=e?.OptimusBenefits_getOptimusSubscriptionStatus;return t?{isMember:t.isMember,isFormerMember:!t.isMember&&!!t.subscriptionNumber,subscriptionNumber:t.subscriptionNumber,billingAccountId:t.billingAccountId,nextCharge:G(t.nextCharge),subscriptionPrice:V(t.subscriptionPrice),...W(t.subscriptionDates),purchaseType:t.purchaseType,trialDetails:t.trialDetails,hasAcceptedVfTerms:t.hasAcceptedVfTerms||!1,isExternallyManaged:t.isExternallyManaged||!1,externalPartnerManagementDetails:t.externalPartnerManagementDetails||null,entitlements:t.entitlements||null}:null},Q=e=>a({query:$,pause:!i()||e},Z),J={__key:0xcd51845f3938,id:"cd51845f39387936c3094cf28e0bfaa4",loc:{},definitions:[]},K=e=>{if(!e?.fullSubscription?.firstCharge)return null;var{firstCharge:t}=e.fullSubscription,n=e.discount&&!e.discount.trialDiscount?e.discount?.originalPrice:t?.totalAmount||0;return{firstCharge:{currencyCode:t?.currencyCode||"USD",dueDate:new Date(t?.dueDate||""),totalAmount:t?.totalAmount||0,originalAmount:n}}},X=e=>{if(!e?.discount)return null;var{discount:t}=e,n=t.status;return{discountCode:t.discountCode,discountCodeRejectionReason:t.discountCodeRejectionReason,discountType:t.discountType,discountNote:t.discountNote,expiryDate:t.expiryDate,status:n,originalPrice:t.originalPrice,discountedPrice:t.discountedPrice,trialDiscount:t.trialDiscount||!1,discountNumPeriodsMonths:t.discountNumPeriodsMonths,discountNumPeriodsAnnual:t.discountNumPeriodsAnnual,trialOriginalPrice:t.trialOriginalPrice,trialDiscountedPrice:t.trialDiscountedPrice}},ee=e=>{if(!e?.trialPeriod)return null;var{trialPeriod:t,fullSubscription:n}=e,{firstCharge:r}=n||{},i=e.discount?.trialDiscount?e.discount?.trialOriginalPrice||0:t.trialCharge?.totalAmount||0,a=t.trialPeriodUnits;return{numberOfDays:t.numberOfDays,endDate:new Date(t.endDate),trialCharge:{currencyCode:t.trialCharge?.currencyCode||"USD",dueDate:new Date(t.trialCharge?.dueDate||""),totalAmount:t.trialCharge?.totalAmount||0,originalAmount:i},trialPeriodUnits:a,trialPeriodDuration:t.trialPeriodDuration||0,renewalCharge:{currencyCode:r?.currencyCode||"USD",dueDate:new Date(r?.dueDate||""),totalAmount:r?.totalAmount||0}}},et=(e,t,n,r)=>{var a=i(),[s,l]=u(a),[{data:c,fetching:d,error:f},p]=b({query:J,variables:{request:{currencyCode:e,discountCode:t,source:r}},pause:n});o(()=>{a===s||n||(p({requestPolicy:"network-only"}),l(a))},[s,n,p,a]);var m=K(c?.subscriptionPricing),g=X(c?.subscriptionPricing),h=ee(c?.subscriptionPricing);return{subscriptionPrice:{isMember:c?.subscriptionPricing?.isMember||!1,fullSubscription:m,discount:g,trialPeriod:h},fetching:d,error:f}},en=e=>{var t=d(),{promoCodeForm:{appliedPromoCode:n,isApplying:r,promoCodeField:i}}=s(m);return C(t,r&&i.value||n?.code,!t,e)},er={__key:0x693090c2ef93,id:"693090c2ef93f0d229ceefb4a6efcaf9",loc:{},definitions:[]},ei=()=>{var[,e]=g(er);return l(()=>e(),[e])},ea={__key:0xf0c3b047a083,id:"f0c3b047a083ffd05b48e7b5d19ee64e",loc:{},definitions:[]},eu={__key:0x7dbee74118bf,id:"7dbee74118bf1e182d230f175ea16473",loc:{},definitions:[]},eo=e=>({BETTER_RATES_ELSEWHERE:e.string("plus_account_cancellation_reason_better_rates_elsewhere"),CANNOT_FIND_REQUIRED_HOTEL:e.string("plus_account_cancellation_reason_cannot_find_required_hotel"),COVID19_PANDEMIC_UNCERTAINTY:e.string("plus_account_cancellation_reason_covid19_pandemic_uncertainty"),CUSTOMER_SERVICE_EXPERIENCE:e.string("plus_account_cancellation_reason_customer_service_experience"),ISSUE_WITH_BOOKING:e.string("plus_account_cancellation_reason_issue_with_booking"),SUBSCRIBED_BY_MISTAKE:e.string("plus_account_cancellation_reason_subscribed_by_mistake"),TRAVEL_PLANS_CHANGED:e.string("plus_account_cancellation_reason_travel_plans_changed")}),es=(e,t,n)=>{var r=eo(n);return(!t&&e?.OptimusBenefits_getUserCancellationReasonOptions?.reasons||[]).map(e=>{var t=r[e];return{reason:e,value:e,displayName:t,label:t}})},el=()=>{var{localize:e}=f(),[{data:t,fetching:n}]=b({query:eu}),r=es(t,n,e),[,i]=g(ea);return[r,l(e=>i({reason:e}),[i])]},ec={__key:21303208491435,id:"13600a2cb9ab2080d1b6ecb7bed11468",loc:{},definitions:[]},ed=()=>{var[{data:e,fetching:t}]=b({query:ec}),n=!t&&e?.OptimusBenefits_getUserCancelSubscriptionEligibility||null;return{upcomingBookings:n?.upcomingBookings||0,status:n?.status||null}},ef=e=>fetch("/data/1.0/plusStandalonePurchase/status",{method:"POST",body:JSON.stringify(e),credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then(e=>{if(e.ok)return e.text();throw Error("failed to get standalone purchase status")}).then(e=>JSON.parse(e)),ep=e=>fetch("/data/1.0/plusStandalonePurchase/start",{method:"POST",body:JSON.stringify(e),credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then(e=>{if(e.ok)return e.text();throw Error("failed to start standalone purchase")}).then(e=>JSON.parse(e)),em=()=>{var{funnelKey:e}=s(h);return l(t=>{var n={currency:t.currency,totalAmount:t.totalAmount,subscriptionNumber:t.subscriptionNumber,funnelKey:e},r=new URLSearchParams;Object.entries(n).forEach(([e,t])=>{r.set(e,String(t))});var i=new AbortController,a=setTimeout(()=>i.abort(),3e3);return fetch("/PlusCommerce",{method:"POST",credentials:"same-origin",body:r.toString(),headers:{"content-type":"application/x-www-form-urlencoded"},signal:i.signal}).finally(()=>clearTimeout(a))},[e])},eb=()=>{var e=E(),t=l((t,n)=>{var r=t.purchaseState?.session;e({currency:r?.currency||null,totalAmount:r?.totalAmount||null,subscriptionNumber:r?.subscriptionNumber||null}).catch(e=>{console.error("Error logging P_Sub commerce click",e)}).finally(()=>{n&&n(t)})},[e]);return l(e=>{var n=0,{session:r,onSuccess:i,onError:a}=e,u=(e,n)=>{clearInterval(e),t(n,i)},o=(e,t)=>{clearInterval(e),a&&a(t)},s=setInterval(()=>{n++>=30&&o(s),P(r).then(e=>{e||o(s,"MISSING_DATA");var{purchaseState:t}=e,n=t?.status,r=t?.session;"SUCCESS"===n&&r&&u(s,e),("INTERNAL_ERROR"===n||"PAYMENT_FAILURE"===n||"ACCOUNT_ERROR"===n)&&o(s,n)}).catch(()=>o(s,"QUERY_ERROR"))},1e3)},[t])},eg=()=>{var e=eb(),t=p(),n=i(),r=d(),a=e=>"PAYPAL"===e?"PAYPAL":null;return l(({billingAccountId:i,checkoutSessionId:u,source:o,billingAddress:s,firstName:l,lastName:c,emailAddress:d,phoneNumber:f,paymentToken:p,storedCardId:m,discountCode:b,onSuccess:g,onError:h,cardType:_,inAuthSessionId:D,inAuthTransactionId:y,inAuthUBAId:C,inAuthUBASessionId:N,inAuthUBAEvents:v,inAuthPageId:S,updateMemberAccountInfo:A,expectedSubscriptionPrice:P,csrfToken:E,paymentNonce:w,paymentMethod:O,payerId:R,paymentEmail:I})=>{var U=null,k=a(O);k&&(U={paymentMethod:k,paymentNonce:w,payerId:R,paymentEmail:I}),T({userId:n||"",billingAccountId:i,pointOfSale:t,source:o,billingAddress:s?{name:s.cardholderName,address1:s.street,address2:s.street2,postalCode:s.postalCode,state:s.state,city:s.city,countryCode:s.country}:void 0,firstName:l,lastName:c,emailAddress:d,phoneNumber:f,sessionPaymentAccountToken:p,checkoutSessionId:u,currencyCode:r,cardType:_,existingStoredCardId:m||null,discountCode:b,inAuthTransactionId:y||"",inAuthSessionId:D||"",inAuthUBAId:C||"",inAuthUBASessionId:N||"",inAuthUBAEvents:v||"",inAuthPageId:S||"",updateMemberAccountInfo:A,expectedSubscriptionPrice:P,csrfToken:E,tokenizedPaymentInfo:U}).then(t=>{if(!t){h();return}t?.status==="IN_PROGRESS"&&t?.session?e({session:t.session,onSuccess:g,onError:h}):t?.status==="PAYMENT_FAILURE"?h("PAYMENT_FAILURE"):h()}).catch(()=>{h()})},[n,t,r,e])},eh=()=>{var{params:e}=_(),t="detailId"in e?e.detailId:void 0;return t?`&detailId=${t}`:""},e_={__key:0xff983cd673dd,id:"ff983cd673ddb9f94faab6dffc72f44e",loc:{},definitions:[]},eD=()=>{var[,e]=g(e_);return l(()=>e(),[e])},ey={__key:0x9867e86aee7f,id:"9867e86aee7f50640847a4079278f0bc",loc:{},definitions:[]},eC=e=>{var t=d(),n=i(),r=c(n),[{data:a,fetching:u,error:s},f]=b({query:ey,variables:{currency:t},pause:e||!t}),p=l(()=>f({requestPolicy:"network-only"}),[f]);return o(()=>{var e=n!==r.current;n&&e&&p(),e&&(r.current=n)},[p,n]),{eligible:a?.OptimusBenefits_getOptimusEligibility?.eligible||!1,subscribed:a?.OptimusBenefits_getOptimusEligibility?.subscribed||!1,error:s,fetching:u}},eN="STANDALONE",ev="OptimusCurationShopping",eS=(e,t)=>{switch(t){case"SHOP_REGULAR":return{flow:ev,variant:"regular",checkoutType:ev};case"SHOP_BEST_RATE":return{flow:ev,variant:"best_rate",checkoutType:ev};default:return{flow:e?"STANDALONE_TRIAL":eN,variant:null,checkoutType:eN}}},eA=()=>(M()||"").startsWith("SHOP_"),eP="shopFlowData",eT=e=>{D.set(eP,D.has(eP)?{...D.get(eP),geoId:e}:{geoId:e},72e5)},eE=()=>{var{geoId:e}=D.get(eP)||{};return e},ew=()=>{D.remove(eP)},eO=()=>{var{params:e}=_();return"oft"in e&&e.oft?e.oft:null};return[()=>{y=Q,C=et,N=en,v=ei,S=el,A=ed,P=ef,T=ep,E=em,w=eg,O=eh,R=eD,I=eC,U=eS,k=eA,e({clearShopCheckoutParams:ew,getFlowVariantCheckoutType:U,getShopCheckoutGeoId:eE,setShopCheckoutGeoId:eT,useCommerceClickLogger:E,useDetailQueryParameter:O,useFlowTypeDesignator:M=eO,useIsShopFlow:k,useOptimusEligibility:I,useOptimusSubscription:y,useOptimusSubscriptionCancel:S,useOptimusSubscriptionCancelEligibility:A,useOptimusSubscriptionDisableAutoRenew:v,useOptimusSubscriptionEnableAutoRenew:R,useOptimusSubscriptionPrice:N,useOptimusSubscriptionPriceQuery:C,usePurchaseOptimusSubscription:w})},[e=>i=e.useUserId,e=>a=e.default,e=>(u=e.useState,o=e.useEffect,s=e.useContext,l=e.useCallback,c=e.useRef),e=>(d=e.useCurrency,f=e.useLocalize,p=e.useLocale),e=>m=e.Payment,e=>(b=e.useQuery,g=e.useMutation),e=>h=e.FunnelTracking,e=>_=e.useRoute,e=>D=e.default]]},["52far5","l47ri7","1o4yt4","17thqz","1yajq4","1mqwhq","1kkqcv","fgwvq1","19b9b1"]]);
