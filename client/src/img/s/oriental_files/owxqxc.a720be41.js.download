(this.$WP=this.$WP||[]).push(["owxqxc",(e,r)=>{var a,t,n,i,o,s,l,p,c,d,u,h,f,m,_,v,g,y,b,R,N,I,w,S,P,C,k,D,E,O,A,T,M,B,V,x,q,z,F,L,K,U,W,Q,Y,j,G,H,Z,J,$,X,ee,er,ea,et,en,ei,eo,es,el,ep,ec,ed,eu,eh,ef,em,e_,ev,eg,ey,eb,eR,eN,eI,ew,eS,eP,eC,ek,eD,eE,eO,eA,eT,eM,eB,eV,ex,eq,ez,eF,eL,eK,eU,eW,eQ,eY,ej,eG,eH,eZ,eJ,e$,eX,e0,e1,e2,e5,e4,e8,e6,e3,e7,e9,re,rr,ra,rt,rn,ri,ro,rs,rl,rp,rc,rd,ru,rh=e=>({baseRateNumericInSessionCurrency:e?.rapData?.rapBaseRateInSessionCurrency??null,bookable:e?.rapData?.rapBookable??null,consolidatedRate:e?.rapData?.rapConsolidatedRate??null,consolidatedRateNumericInSessionCurrency:e?.rapData?.rapConsolidatedRateInSessionCurrency??null,deposit:e?.rapData?.rapDeposit??null,errors:e?.errors??null,firstPayment:e?.rapData?.rapFirstPayment??null,getDisplayDiscount:e?.rapData?.getDisplayDiscount??null,isInquiryAllowed:e?.rapData?.isInquiryAllowed??null,isInstantBook:e?.rapData?.rapBookable==="INSTANT",isOffsiteBooking:e?.rapData?.isOffsiteBooking??null,isSplitPayment:!!e?.rapData?.rapIsSplitPayment,minStay:e?.rapRate?.minStay??null,ownerFees:e?.rapData?.rapOwnerFees??null,refundableDeposit:e?.rapData?.rapRefundableDeposit??null,secondPayment:e?.rapData?.rapSecondPayment??null,secondPaymentDue:e?.rapData?.rapSecondPaymentDue??null,stayLength:e?.view?.stayLength??null,subtotal:e?.rapData?.rapSubtotal??null,subtotalCurrency:e?.rapData?.rapSubtotalCurrency??null,subtotalNumericInSessionCurrency:e?.rapData?.subtotalNumericInSessionCurrency??null,tax:e?.rapData?.rapTax??null,taxNumericInSessionCurrency:e?.rapData?.taxNumericInSessionCurrency??null,tipQuoteToken:e?.tipQuoteToken??null}),rf=e=>e,rm={container:"QyDhu b y S4 c _S",icon:"MeECT",popOver:"qyxwt b"};function r_(e,r,a){return r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}var rv=e=>{var{localize:r}=m();return a(eO,{...e,localize:r})},rg="VR_RAP_WEB_COMPONENT",ry={fullPaymentSubTotalRow:"JgzbO b f k",firstPaymentSection:"ooFwd b f e",bookingPrice:"lWHtu",fullPaymentSubTotalLabel:"ncBWM b",sendInquiryWrapper:"tzNCU",priceHatContainer:"TunKR"},rb=e=>{var{businessInfo:{isFTL:r,isSTL:a,tipType:t}}=e;return"HA"!==e.vrSource&&e.providerOrdinal!==E&&(r||a||!!t&&("TIP"===t||"TIP_INSTANT_BOOK"===t))},rR=(e,r)=>()=>a("div",{className:"f",children:t("div",{className:"FacxX",children:[a("div",{className:"RZqbU b",children:e.string("vr_payment_protection")}),t("div",{className:"QEIDs",children:[e.string("ftl_peace_of_mind_book_hl_171f")," ",a(j,{onClick:r,href:"/pages/payment_protection_general.html",children:e.string("airm_learnMore")})]}),a("div",{className:"vr-sprite-credit-cards2"})]})}),rN=(e,r)=>a("div",{ref:e,onClick:r,className:"f e u _S",children:a("div",{className:"ODgxo c",children:a(f,{id:"vr_property_has_payment_protection"})})}),rI=()=>{var{localize:e}=m(),r=Q(),t=s(()=>r(eq.paymentProtectionTooltipShown),[r]),n=rR(e,s(()=>r(eq.paymentProtectionLearnMoreClick),[r]));return a(W,{below:!0,contents:n,onClick:t,children:rN})},rw=({rental:e,locale:r})=>{var{localize:t}=m();if(Z()||!e.isAffiliate||!e.affiliateLogoUrl||!G("vr_show_home_away_branding"))return null;var n=O(e.providerOrdinal,r),i=n?t.string("vr_affiliate_logo",{sAffiliateName:n}):"";return a("div",{className:"liOyr Mg f j",children:a("img",{className:H("daASH",{FAiud:e.providerOrdinal===E}),src:e.affiliateLogoUrl,alt:i})})},rS=(e,r)=>(t,n)=>a("div",{ref:t,onClick:n,children:a("div",{className:"DRRmq C5 _S",children:r.string("vr_fees_applied_ffffdcba_sl2",{0:e.isRbo?"1":"2"})})}),rP=e=>{var{localize:r}=m();return a(X,{leftOf:!0,message:r.string("vr_rate_info_msg_undated_default_ffffeea6"),children:rS(e,r)})},rC={inquiryWrapper:"mDukt Pj",basePriceContainer:"IMDwz",basePrice:"RFDoO b",rapWarningCopy:"pcekS c"},rk=e=>{var{localize:r}=m();return t("div",{className:"S4 Mg c MF",children:[t("span",{className:"b",children:[r.string("vr_x_travelers",{nNumTravelers:2*e.recentViewCount})," "]}),a("span",{children:r.string("vr_viewed_property_last_week")})]})},rD=()=>{var{localize:e}=m(),r=Y(eq.wireTransferWarningTooltipShown);return a(X,{below:!0,message:e.string("vr_wire_transfer_warning_icon_info"),onShow:r,children:r=>a("div",{ref:r,className:"c C5 _S MC",children:e.string("vr_wire_transfer_info")})})},rE=()=>{var{localize:e}=m();return t("div",{className:"KQnuV Pg f e u",children:[a($,{name:"lightbulb-on",className:"UMNvm"}),a("div",{className:"UjKIE",children:e.string("vr_wire_transfer_warning")}),a(eU,{})]})},rO=e=>{var{localize:r}=m();return t("div",{children:[a("div",{className:"JFYew b S8",children:r("ftl_inquire_for_rates")}),a(C,{legacyButton:!0,disableFormOpen:!e.buttonShouldOpenForm,onClick:e.onSendMessage,fullWidth:!0,children:r("ftl_make_inquiry")}),a(eF,{rental:e.rental,locale:e.locale}),a(eW,{})]})},rA=()=>{var{localize:e}=m();return a("div",{className:"cuhPT f u j",children:a(ee,{variant:"supporting-01",marginTop:"spacing-02",children:t("div",{className:"f u",children:[a(er,{color:"primaryIcon",size:24,marginRight:"spacing-01"}),e.string("shopping_cart_instant_confirmation")]})})})};function rT(e,r,a){return r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}var rM={"data-automation":"bookNowPDP"},rB=()=>{var{localize:e}=m();return t("div",{children:[a("div",{className:rC.rapWarningCopy,children:e.string("vr_wire_transfer_warning")}),a(eU,{})]})},rV=e=>{var{localize:r}=m(),t=_();return a(eA,{...e,localize:r,globalize:t})},rx=e=>a("div",{className:"Mg",children:t("div",{className:"Mg",children:[e.rental?a(eF,{rental:e.rental,locale:e.locale}):null,e.showBadge?a(ez,{}):null,e.rental?.isAffiliate?null:a(rB,{})]})}),rq=()=>{var{localize:e}=m();return a("div",{className:"ZPNaJ S5 Pf Ps",dangerouslySetInnerHTML:{__html:e.string("ftl_split_pay_available",{cssClasses:"VNWBk b"})}})},rz={totalEstimateLine:"msIzd S3",priceHatContainer:"JryxS"},rF={priceRow:"BEMhq S4 f k MD Me",boldPriceRow:"AmpBC S4 f k MD Me b"},rL=({label:e,price:r,bold:n})=>t("div",{className:n?rF.boldPriceRow:rF.priceRow,children:[a("div",{children:e}),a("div",{children:r})]}),rK=e=>{var{localize:r}=m(),n=r(e.rateComment?"vr_owner_terms_apply":"vr_why_total_estimate"),i=e.rateComment?e.rateComment:r("vr_rate_info_msg_dated_detail_ffffeea6");return t("div",{className:rz.totalEstimateLine,children:["*",n," ",a(X,{below:!0,message:i,children:e=>a("span",{ref:e,children:a($,{name:"question-circle"})})})]})},rU=e=>{var{localize:r}=m(),n=v();return t("div",{children:[a(eH,{}),a(eZ,{label:r.string("vr_rap_subtotal_27a_pl",{0:e.stayLength}),price:e.rapResponse.rapData.rapConsolidatedRate}),e.rapResponse.rapData.rapTax?a(eZ,{label:r.string("vr_fees_tax_81f"),price:e.rapResponse.rapData.rapTax}):null,e.rapResponse.rapData.rapDeposit?a(eZ,{label:r.string("ftl_deposit"),price:e.rapResponse.rapData.rapDeposit}):null,e.rapResponse.rapData.rapOwnerFees?a(eZ,{label:r.string("vr_owner_fees_ffffdcba"),price:e.rapResponse.rapData.rapOwnerFees}):null,a(eZ,{bold:!0,label:r.string("vr_estimated_total"),price:e.rapResponse.rapData.rapSubtotal}),a(rK,{rateComment:e.rateComment}),a("div",{className:rz.priceHatContainer,children:a(ex,{rapResponse:e.rapResponse,rental:e.rental})}),a(C,{onClick:e.makeInquiry,fullWidth:!0,disableFormOpen:!e.shouldOpenForm,legacyButton:!0,children:r("ftl_make_inquiry")}),a(eF,{rental:e.rental,locale:n}),e.recentViewCount?a(eK,{recentViewCount:e.recentViewCount}):null,a(eW,{})]})},rW=e=>{var{localize:r}=m();return t("div",{children:[a(eH,{}),a(eZ,{label:r.string("vr_rap_subtotal_27a_pl",{0:e.stayLength}),price:e.rateInfo.localizedSubtotal}),a(eZ,{bold:!0,label:r.string("vr_estimated_total"),price:e.rateInfo.localizedSubtotal}),a(rK,{rateComment:e.rateComment}),a("div",{className:rz.priceHatContainer,children:a(ex,{rapResponse:e.rapResponse,rental:e.rental})}),a(C,{onClick:e.makeInquiry,fullWidth:!0,legacyButton:!0,children:r("ftl_make_inquiry")}),e.recentViewCount?a(eK,{recentViewCount:e.recentViewCount}):null,a(eW,{})]})},rQ=e=>e.rapResponse&&e.rapResponse.rapData?a(rU,{...e}):a(rW,{...e}),rY=e=>a("div",{className:"aXVru S4 b c",children:e.message});function rj(e,r,a){return r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}var rG=({firstPayment:e})=>{var{localize:r}=m();return t("div",{className:ry.firstPaymentSection,children:[a("div",{children:r.string("ftl_split_pay_reserve")}),a("div",{className:ry.bookingPrice,children:e})]})},rH=({subTotal:e})=>{var{localize:r}=m();return t("div",{className:ry.fullPaymentSubTotalRow,children:[a("div",{className:ry.fullPaymentSubTotalLabel,children:r.string("ftl_subtotal")}),a("div",{className:ry.bookingPrice,children:e})]})},rZ={"data-automation":"bookNowPDP"},rJ=()=>{N({module:"VR_RAP_WEB_COMPONENT",action:"VR_Make_Inquiry_VRR"})},r$=()=>{N({module:"VR_RAP_WEB_COMPONENT",action:"VR_Send_Message_VRR"})},rX=e=>{var{localize:r}=m(),t=ei(),n=A(),i=et(),o=en();return a(eB,{...e,localize:r,affiliateClickOffPriceSeenParams:n,monitorPotentialRevenue:i,viewportCategory:o,logImpression:t})};function r0({rental:e,rapData:r}){return l(()=>{var a,t;return e?r?(a=new Set,((t=!!r.bookable&&"NONE"!==r.bookable||!!r.isOffsiteBooking)&&a.add(eX.BOOK),t)?(r?r.isInquiryAllowed&&!e.isAffiliate:e.canReceiveInquiries)&&a.add(eX.SEND_MESSAGE):a.add(eX.MAKE_INQUIRY),a):function(e){var r=new Set,{baseDailyRate:a}=e,t=a?e.isOnlineBookable||e.isAffiliate&&e.providerOrdinal!==E:e.isAffiliate;t&&r.add(eX.BOOK);var n=!e.isAffiliate||!!a&&!e.isOnlineBookable&&e.providerOrdinal===E;return t?n&&r.add(eX.SEND_MESSAGE):r.add(eX.MAKE_INQUIRY),r}(e):new Set},[e,r])}var r1="VR_RAP_WEB_COMPONENT";function r2({rental:e,rapData:r,geoId:a,reduxLocale:t,checkInDate:n,checkOutDate:i,adults:o,children:u,onDateLess:h,monikerEnabled:f=!0}){var m=e.id,_=eu(),v=Q(),[y,b]=d(!1),R=r0({rental:e,rapData:r}),N=M(e.isAffiliate,e.providerOrdinal),I=g(),w=et(),P=l(()=>!n||!i||0===eh(n,i),[n,i]),C=s(()=>{P&&(e?.isAffiliate?z(e.id,a,_,e.providerOrdinal):v(e0.showPrices),h?.())},[P,e?.isAffiliate,e.id,e.providerOrdinal,a,_,v,h]),k=A(),E=en(),O=s(()=>{if(r){var{providerOrdinal:n}=e;n&&q({detailId:m,trackingParams:V(B(n),m,a,_),locale:t,checkoutSource:"property",providerOrdinal:n,amountWithCurrency:r.subtotalNumericInSessionCurrency?x(r.subtotalNumericInSessionCurrency,I):"",priceSeenAssociatedParams:k,viewportCategory:E})}},[m,a,r,t,e,_,I,k,E]),T=s(()=>{if(P){C();return}if(r){w();var{isOffsiteBooking:a,tipQuoteToken:t}=r;if(M(!!a,e.providerOrdinal)){O();return}b(!0);try{var s=S();D({detailId:m,start:ef(n,"/"),end:ef(i,"/"),adults:o,tipQuoteToken:t??"",kids:u,partnerParams:s})}catch{b(!1)}}},[P,r,e.providerOrdinal,C,O,m,n,i,o,u,w]),F=s(()=>{if(P){C();return}R.has(eX.SEND_MESSAGE)?v(e0.sendMessage):N?T():v(e0.makeInquiry)},[R,C,T,P,N,v]);return!function({rapData:e,enabled:r=!0}){var a=em(l(()=>({type:"ENTER_DATES",payload:{vrCurrency:e?.subtotalCurrency,vrBaseValue:e?.consolidatedRateNumericInSessionCurrency?.toString()??void 0,vrTaxPrice:e?.taxNumericInSessionCurrency?.toString()??void 0,vrValue:e?.subtotalNumericInSessionCurrency?.toString()??void 0}}),[e?.consolidatedRateNumericInSessionCurrency,e?.subtotalCurrency,e?.subtotalNumericInSessionCurrency,e?.taxNumericInSessionCurrency])),t=p(a);c(()=>{t.current=a},[a]),c(()=>{e&&r&&t.current()},[e,r])}({rapData:r,enabled:f&&!!r&&R.has(eX.BOOK)}),{allowedActions:R,bookingButtonLoading:y,onBookButtonClick:T,isOffsiteInquiry:N,onMessageButtonClick:F}}var r5={alignTextCenter:"c"},r4=({availableMessage:e,basePrice:r,bookButton:i,inquiryMode:o=e1.SEND_MESSAGE,messageButton:s,priceBreakdown:l,affiliateLogo:p,paymentBadge:c,wireTransferWarning:d})=>{var{localize:u}=m();return t("div",{className:"IpWGu",children:[e,r,l,a("div",{className:"OAIGr",children:o===e1.MAKE_INQUIRY?!!s&&t("div",{className:r5.alignTextCenter,children:[!r&&!l&&a(ee,{variant:"title-05",marginBottom:"spacing-02",children:u("ftl_inquire_for_rates")}),s]}):t(n,{children:[i,s]})}),p,c,d]})},r8={"data-automation":"bookNowPDP"},r6=({onClick:e,loading:r,fullWidth:t})=>{var{localize:n}=m();return L("click",r=>{r.target&&I(r.target.id)&&e()},void 0,!0),a(e_,{variant:"commerce",fullWidth:t,onClick:e,loading:!!r,"aria-label":n.string("b4o_book_now"),dataAttributes:r8,children:n("b4o_book_now")})},r3=({alignTextCenter:e=!0,...r})=>{var{localize:n}=m();return a("div",{className:es(el(r),{[r5.alignTextCenter]:e}),children:t(ee,{variant:"supporting-02",children:[a(er,{color:"primaryIcon",size:24}),"\xa0",n("shopping_cart_instant_confirmation")]})})},r7=({rental:e,onClick:r,loading:n})=>t("div",{children:[a(e5,{onClick:r,loading:n,fullWidth:!0}),e.isInstantBook&&a(e4,{alignTextCenter:!0,marginTop:"spacing-02"})]}),r9=({rental:e,affiliateLogo:r,paymentBadge:n,wireTransferWarning:i,geoId:o,onDateLess:s})=>{var{localize:l}=m(),p=_(),{allowedActions:c,onBookButtonClick:d,onMessageButtonClick:u}=r2({rental:e,geoId:o,onDateLess:s}),{baseDailyRate:h}=e,f=c.has(eX.BOOK);return a(e2,{basePrice:!!h&&t("div",{children:[a(ee,{variant:"title-05",children:l("vr_price_from_283")}),t("div",{className:ep({display:"flex",alignItems:"center"}),children:[t(ee,{variant:"title-02",marginRight:"spacing-02",children:[p.formatCurrencyInteger(h),l("vr_detail_rate2_171f_pl",{0:"",1:1})]}),a(ec,{triggeringElement:a(ed,{}),content:l("vr_rate_info_msg_undated_default_ffffeea6"),variant:"top-caret",alignment:"left",fitToContent:"shrink"})]})]}),inquiryMode:c.has(eX.MAKE_INQUIRY)?e1.MAKE_INQUIRY:e1.SEND_MESSAGE,bookButton:!!f&&a(e8,{rental:e,onClick:d}),messageButton:(c.has(eX.SEND_MESSAGE)||c.has(eX.MAKE_INQUIRY))&&a(C,{onClick:u,variant:c.has(eX.MAKE_INQUIRY)?"commerce":"secondary",fullWidth:!0,disableFormOpen:!0,children:l(c.has(eX.MAKE_INQUIRY)?"vr_make_inquiry":"vr_send_message")}),affiliateLogo:r,paymentBadge:f&&n,wireTransferWarning:i})},ae={__key:0xc8f9baaf2f56,id:"c8f9baaf2f56d0b38ba3f59860e9fbea",loc:{},definitions:[]},ar=e=>{var r=g(),{propertyId:a,arrival:t,adults:n,children:o,departure:s}=e,l=t?ef(t):null,p=s?ef(s):null;return i.useMemo(()=>({propertyId:a??0,arrival:l??"",departure:p??"",adults:n??0,children:o,currency:r,tryDeferredDeposit:!0}),[n,o,r,l,p,a])};function aa({propertyId:e,arrival:r,departure:a,adults:t,children:n,pause:i,keepPreviousDataOnRefetch:o=!1,shouldUseOldAPI:d}){var h=ei(),{state:f,actions:m}=u(ru),{data:_,fetching:v}=f.oldRapData??{},[g,y]=J(),b=g&&!d;c(()=>{d||y()},[y,d]);var R=l(()=>[{fetching:v??!1,data:!o&&v?null:_}],[o,v,_]),N=p(0),I=p(0),w=r?ef(r):null,S=a?ef(a):null,P=!b||i||!e||!w||!S||"number"!=typeof t,C=e3({propertyId:e,arrival:r,adults:t,children:n,departure:a});c(()=>{N.current=performance.now()},[C]);var k=p(!1),[D]=eN({query:ae,variables:{request:[C]},pause:P,isResultComplete:s(e=>{var r=!e.fetching&&!e.error&&e.data?.RentalInformation_getRentalRateAsync?.[0]?.isFinished===!0;if(r){k.current=!0,I.current=performance.now();var a=I.current-N.current;a>0&&h({impressionKey:"new_rap_api_response_time",customData:{value:a}})}return r},[h]),pollIntervals:e7}),E=l(()=>({fetching:D.fetching,data:!o&&(D.fetching||P)?null:D.data?.RentalInformation_getRentalRateAsync?.[0]?.rentalRate}),[o,P,D.data?.RentalInformation_getRentalRateAsync,D.fetching]);return c(()=>{b&&k&&m?.updateNewApiData(E)},[m,E,k,b]),l(()=>b?[E]:R,[b,E,R])}var at=e=>{var r=e9.useIncrementCallback(e);return s(()=>{r(1)},[r])};function an({rental:e,oldRapData:r,shouldUseOldAPI:a,pause:t,...n}){var[i]=aa({...n,keepPreviousDataOnRefetch:!1,shouldUseOldAPI:e?.requiresPetInput}),o=i.data,s=g(),l=ei(),p=e3(n),d=re("lbIpBMmOAI8TPFR5fba4d9fkVM4Br96jwd9I28RhhNZN+DcFNS/pePtkQCK3P30H");return c(()=>{var{isRbo:r}=e.propertyManager;if(l(r?e0.RBOPropertyType:e0.PMPropertyType),!o){i.fetching||(l({impressionKey:"new_rap_api_no_data",customData:{value:p}}),d());return}if(o.errors?.length){l(e0.RAPError);return}var{isOffsiteBooking:a,isSplitPayment:t}=o;l(t?e0.SplitPaymentType:e0.FullPaymentType),a&&l(e0.HAPropertyType)},[l,e.propertyManager,o,i.fetching,p,d]),c(()=>{o&&n.arrival&&n.departure&&"number"==typeof n.adults&&o.subtotalNumericInSessionCurrency&&e.id&&w({adults:n.adults,children:n.children||0,arrival:ef(n.arrival),departure:ef(n.departure),homeId:e.id,subTotal:o.subtotalNumericInSessionCurrency,currencyCode:s})},[e.id,s,o,n.arrival,n.departure,n.adults,n.children]),c(()=>{if(r&&o){var e=(r.errors||[]).map(e=>e.reason),a=(o.errors||[]).map(e=>e?.reason).filter(e=>!!e),t=eR(e,a),n=eR(a,e);t.forEach(e=>l(e0.errorMissingInNewAPI(e,p))),n.forEach(e=>l(e0.errorMissingInOldAPI(e,p))),[{name:"subtotal",oldValue:r.rapData?.subtotalNumericInSessionCurrency,newValue:o.subtotalNumericInSessionCurrency},{name:"ownerFees",oldValue:r.rapData?.rapOwnerFees,newValue:o.ownerFees},{name:"deposit",oldValue:r.rapData?.rapDeposit,newValue:o.deposit},{name:"tax",oldValue:r.rapData?.taxNumericInSessionCurrency,newValue:o.taxNumericInSessionCurrency},{name:"bookable",oldValue:r.rapData?.rapBookable,newValue:o.bookable},{name:"isOffsiteBooking",oldValue:r.rapData?.isOffsiteBooking,newValue:o.isOffsiteBooking},{name:"firstPayment",oldValue:r.rapData?.rapFirstPayment,newValue:o.firstPayment},{name:"secondPayment",oldValue:r.rapData?.rapSecondPayment,newValue:o.secondPayment},{name:"baseRate",oldValue:r.rapData?.rapBaseRateInSessionCurrency,newValue:o.baseRateNumericInSessionCurrency},{name:"consolidatedRate",oldValue:r.rapData?.rapConsolidatedRateInSessionCurrency,newValue:o.consolidatedRateNumericInSessionCurrency}].forEach(({name:e,oldValue:r,newValue:a})=>{Object.is(r??null,a??null)||l(e0.diffInOldAndNewAPIs(e,r,a,p))})}},[r,o,l,p]),[i]}function ai({typographyVariant:e,leftNode:r,leftInfoNode:n,rightNode:i,dataAutomationTag:o}){return t("div",{className:ep({display:"flex",justifyContent:"space-between"}),"data-automation":o,children:[t("div",{className:ep({display:"flex",alignItems:"center"}),children:[a(ee,{variant:e,children:r}),n]}),a(ee,{variant:e,children:i})]})}var ao=({subtotal:e,stayLength:r,consolidatedRate:i,tax:o,deposit:l,ownerFees:p,hideBreakdownRows:c=!1,isEstimated:u=!1,isSplitPayment:h=!1,firstPayment:f,secondPayment:v,secondPaymentDue:g,rateComment:y,collapsable:b=!0,onBreakDownCollapse:R,onBreakdownExpand:N,providerOrdinal:I})=>{var w,{localize:S}=m(),P=_(),[C,k]=d(!1),D=s(()=>{k(!1),R?.()},[R]),E=s(()=>{k(!0),N?.()},[N]),O=ai({typographyVariant:"title-04",leftNode:u?t(n,{children:[S("vr_estimated_total"),"\xa0"]}):S("vr_total"),leftInfoNode:u&&a(ec,{triggeringElement:a(ed,{size:12}),title:S(y?"vr_owner_terms_apply":"vr_why_total_estimate"),content:y||S("vr_rate_info_msg_dated_detail_ffffeea6"),variant:"top-caret",alignment:"left",fitToContent:"shrink"}),rightNode:e,dataAutomationTag:"totalPriceForNights"});return t("div",{children:[c||b&&!C?t("div",{children:[O,!u&&a(ee,{variant:"supporting-02",children:S("vr_includes_fees_taxes")})]}):(w=S(I===T?"vr_taxes_and_fees":"vr_fees_tax_81f"),t("div",{children:[t("div",{className:"RqJoS",children:[ai({typographyVariant:"title-05",leftNode:S("vr_rap_subtotal_27a_pl",{0:r}),rightNode:i,dataAutomationTag:"ratesForNights"}),!!o&&ai({typographyVariant:"title-05",leftNode:w,rightNode:o}),!!p&&ai({typographyVariant:"title-05",leftNode:S("vr_owner_fees_ffffdcba"),rightNode:p}),!!l&&ai({typographyVariant:"title-05",leftNode:S("ftl_deposit"),rightNode:l})]}),a(eC,{marginY:"spacing-02"}),O]})),!c&&b&&a(ev,{variant:"primary-small",onClick:C?D:E,marginTop:"spacing-02",children:S(C?"vr_close_rate_breakdown":"vr_view_rate_breakdown")}),!!(!u&&h&&f&&v&&g)&&t("div",{className:el({marginTop:"spacing-03"}),children:[ai({typographyVariant:"title-04",leftNode:S("vr_reserve_now_for"),rightNode:f}),ai({typographyVariant:"body-01",leftNode:S("vr_pay_the_rest_on_date",{paymentDate:P.formatDate("date_medium",new Date(g))}),rightNode:v})]})]})},as=({rental:e,geoId:r,checkInDate:n,checkOutDate:i,adults:o,kids:l,reduxLocale:p,affiliateLogo:c,paymentBadge:d,wireTransferWarning:u,oldRapData:h})=>{var{localize:f}=m(),_=Q(),v=s(()=>_(e0.priceBreakDownCollapse),[_]),g=s(()=>_(e0.priceBreakdownExpand),[_]),[{fetching:y,data:b}]=an({propertyId:e.id,arrival:n,departure:i,adults:o,children:l,rental:e,oldRapData:h}),{allowedActions:R,bookingButtonLoading:N,isOffsiteInquiry:I,onBookButtonClick:w,onMessageButtonClick:S}=r2({rental:e,rapData:b,geoId:r,reduxLocale:p,checkInDate:n,checkOutDate:i,adults:o,children:l}),P=R.has(eX.BOOK),k=R.has(eX.SEND_MESSAGE)||b?.subtotal?e1.SEND_MESSAGE:e1.MAKE_INQUIRY;return y?a("div",{className:r5.alignTextCenter,children:a(ey,{variant:"medium"})}):!b||b?.errors?.length?a(e2,{affiliateLogo:c,paymentBadge:d,wireTransferWarning:u}):a(e2,{availableMessage:!!(P||b.subtotal)&&a("div",{className:r5.alignTextCenter,children:t(ee,{variant:"supporting-03",children:[a(eb,{size:24}),"\xa0",f("vr_your_dates_are_available")]})}),inquiryMode:k,bookButton:P&&a(e8,{rental:e,onClick:w,loading:N}),messageButton:(R.has(eX.SEND_MESSAGE)||R.has(eX.MAKE_INQUIRY))&&a(C,{onClick:S,variant:R.has(eX.MAKE_INQUIRY)?"commerce":"secondary",fullWidth:!0,disableFormOpen:I,children:f(R.has(eX.MAKE_INQUIRY)?"vr_make_inquiry":"vr_send_message")}),priceBreakdown:!!(P||b.subtotal)&&a(rr,{consolidatedRate:b.consolidatedRate??"",stayLength:b.stayLength??0,tax:b.tax,deposit:b.deposit,ownerFees:b.ownerFees,subtotal:b.subtotal??"",isEstimated:!P,hideBreakdownRows:P&&!(!b.baseRateNumericInSessionCurrency||!b.subtotalNumericInSessionCurrency||b.baseRateNumericInSessionCurrency<=b.subtotalNumericInSessionCurrency),isSplitPayment:b.isSplitPayment,firstPayment:b.firstPayment,secondPayment:b.secondPayment,secondPaymentDue:b.secondPaymentDue,rateComment:e.rateComment,collapsable:!1,onBreakDownCollapse:v,onBreakdownExpand:g,providerOrdinal:e.providerOrdinal||null}),affiliateLogo:c,paymentBadge:P&&d,wireTransferWarning:u})},al=({rental:e})=>{var r=v(),{localize:t}=m();if(Z()||!e.isAffiliate||!e.affiliateLogoUrl)return null;var n=O(e.providerOrdinal,r),i=n?t.string("vr_affiliate_logo",{sAffiliateName:n}):"logo";return a("div",{className:"TnzYI f j",children:a("img",{className:H("GNzQD",{KkDrx:e.providerOrdinal===E}),src:e.affiliateLogoUrl,alt:i})})},ap=()=>{var{localize:e}=m(),r=Q(),n=s(()=>r(e0.paymentProtectionTooltipShown),[r]),i=s(()=>r(e0.paymentProtectionLearnMoreClick),[r]);return a("div",{className:r5.alignTextCenter,children:a(ec,{triggeringElement:a(ek,{src:"/img2/vacationrentals/payment_protection_logo.svg"}),title:e("vr_payment_protection"),content:t("div",{children:[e("ftl_peace_of_mind_book_hl_171f"),"\xa0",a(eD,{onClick:i,theme:"inline",href:"/pages/payment_protection_general.html",target:"_blank",children:e("airm_learnMore")})]}),variant:"top-caret",alignment:"middle",onShowTooltip:n})})},ac=()=>{var{localize:e}=m(),r=Y(e0.wireTransferWarningTooltipShown);return t("div",{className:r5.alignTextCenter,children:[a(ee,{variant:"supporting-01",marginBottom:"spacing-01",children:e("vr_wire_transfer_warning")}),a(ec,{triggeringElement:a("div",{className:"Wb",children:a(ee,{variant:"supporting-01",children:e("vr_learn_more_about_paying_safely")})}),content:e("vr_wire_transfer_warning_icon_info"),variant:"top-caret",alignment:"middle",fitToContent:"shrink",onShowTooltip:r})]})},ad=({rental:e,geoId:r,showMissingRequireFields:t,oldRapData:n})=>{var{vr:{checkInDate:i,checkOutDate:o,adults:s,children:l}}=eo();if(!e||!e.id)return null;var p=a(rt,{rental:e}),c=function(e){var{businessInfo:{isFTL:r,isSTL:a,tipType:t}}=e;return"HA"!==e.vrSource&&!e.isAffiliate&&(r||a||!!t&&("TIP"===t||"TIP_INSTANT_BOOK"===t))}(e)&&a(rn,{}),d=!e?.isAffiliate&&a(ri,{});return i&&o&&"number"==typeof s?a(ra,{geoId:r,checkInDate:i,checkOutDate:o,adults:s,kids:l,rental:e,affiliateLogo:p,paymentBadge:c,wireTransferWarning:d,oldRapData:n}):a(e6,{rental:e,geoId:r,affiliateLogo:p,paymentBadge:c,wireTransferWarning:d,onDateLess:t})},au=e=>rf(e.rental?.requiresPetInput??!1)?a(e$,{...e}):a(ro,{rental:e.rental,geoId:e.geoId,showMissingRequireFields:e.showMissingRequireFields,oldRapData:e.rapResponse?.data??void 0}),ah={footer:"MEkZN",variantContainer:"UthAm f u",leftSectionContainer:"F1 f e Q1"},af=({rental:e,geoId:r,onDateLess:n,affiliateTextNode:i,instantConfirmationNode:o})=>{var{localize:s}=m(),l=_(),{allowedActions:p,onBookButtonClick:c,onMessageButtonClick:d}=r2({rental:e,geoId:r,onDateLess:n}),{baseDailyRate:u}=e,h=!!u&&t(ee,{variant:"title-05",children:[s("vr_price_from_283"),"\xa0",l.formatCurrencyInteger(u),s("vr_detail_rate2_171f_pl",{0:"",1:1})]}),f=p.has(eX.MAKE_INQUIRY)&&a(ee,{variant:"title-05",children:s("ftl_inquire_for_rates")}),v=p.has(eX.BOOK)&&a(e5,{fullWidth:!0,onClick:c}),g=(p.has(eX.SEND_MESSAGE)||p.has(eX.MAKE_INQUIRY))&&a(C,{onClick:d,variant:p.has(eX.MAKE_INQUIRY)?"commerce":"secondary",fullWidth:!0,disableFormOpen:!0,children:s(p.has(eX.MAKE_INQUIRY)?"vr_make_inquiry":"vr_send_message")});return t("div",{children:[t("div",{className:ah.variantContainer,children:[t("div",{className:ah.leftSectionContainer,children:[h||f,i]}),a("div",{children:v||g})]}),p.has(eX.BOOK)&&o]})},am=({rental:e,geoId:r,checkInDate:n,checkOutDate:i,adults:o,kids:s,reduxLocale:l,affiliateTextNode:p,instantConfirmationNode:c,oldRapData:d})=>{var{localize:u}=m(),[{fetching:h,data:f}]=an({propertyId:e.id,arrival:n,departure:i,adults:o,children:s,rental:e,oldRapData:d}),{allowedActions:_,bookingButtonLoading:v,isOffsiteInquiry:g,onBookButtonClick:y,onMessageButtonClick:b}=r2({rental:e,rapData:f,geoId:r,reduxLocale:l,checkInDate:n,checkOutDate:i,adults:o,children:s});if(h)return a("div",{className:r5.alignTextCenter,children:a(ey,{variant:"medium"})});if(!f||f?.errors?.length)return null;var R=!!f.subtotal&&t(ee,{variant:"title-05",children:[f.subtotal,"\xa0/\xa0",u("vr_pdp_nightly_period_lower",{numNights:f.stayLength})]}),N=_.has(eX.MAKE_INQUIRY)&&a(ee,{variant:"title-05",children:u("ftl_inquire_for_rates")}),I=_.has(eX.BOOK)&&a(e5,{fullWidth:!0,onClick:y,loading:v}),w=(_.has(eX.SEND_MESSAGE)||_.has(eX.MAKE_INQUIRY))&&a(C,{onClick:b,variant:_.has(eX.MAKE_INQUIRY)?"commerce":"secondary",fullWidth:!0,disableFormOpen:g,children:u(_.has(eX.MAKE_INQUIRY)?"vr_make_inquiry":"vr_send_message")});return t("div",{children:[t("div",{className:ah.variantContainer,children:[t("div",{className:ah.leftSectionContainer,children:[R||N,p]}),a("div",{children:I||w})]}),_.has(eX.BOOK)&&c]})},a_=({rental:e})=>{var r=v();if(!e.isAffiliate)return null;var t=O(e.providerOrdinal,r);return t?a(ee,{variant:"body-01",children:t}):null},av=({rental:e,geoId:r,showMissingRequireFields:t,oldRapData:n})=>{var{vr:{checkInDate:i,checkOutDate:o,adults:l,children:p}}=eo(),c=s(()=>{var e=document.getElementById("rapCheckin");if(e){var r=e.getBoundingClientRect(),a=window.pageYOffset;window.scrollTo({top:r.top+a-90,behavior:"smooth"})}},[]),d=s(()=>{t?.(),c()},[t,c]);if(!e||!e.id)return null;var u=a(rc,{rental:e}),h=!!e.isInstantBook&&a(e4,{alignTextCenter:!0,marginY:"spacing-01"});return a("div",{className:ah.footer,children:i&&o&&"number"==typeof l?a(rp,{geoId:r,checkInDate:i,checkOutDate:o,adults:l,kids:p,rental:e,affiliateTextNode:u,instantConfirmationNode:h,oldRapData:n}):a(rl,{rental:e,geoId:r,onDateLess:d,affiliateTextNode:u,instantConfirmationNode:h})})},ag={oldRapData:null,newRapData:null},ay=(e,r)=>{switch(r.type){case"updateNewApiData":return{...e,newRapData:r.value};case"resetDefault":return{...ag};default:return console.error("rapReducer Unhandled action",r),e}},ab=({oldRapData:e,children:r})=>{var[t,n]=i.useReducer(ay,{...ag,oldRapData:e}),o=i.useMemo(()=>({updateNewApiData(e){e&&n({type:"updateNewApiData",value:e})},resetDefault(){n({type:"resetDefault"})}}),[n]),s=i.useMemo(()=>({state:{...t,oldRapData:e},actions:o}),[t,e,o]);return a(ru.Provider,{value:s,children:r})};return e({useRapAllowedActions:r0,useRentalRate:aa}),[()=>{eE=class extends o{getSavingsPercent(){return this.props.response&&this.props.response.savingsPercent}render(){return this.props.response&&this.props.response.isApplicable?a(P,{in:!0,children:a(W,{above:!0,contents:this.popoverContent,closeButton:!1,children:this.popoverTrigger})},"savings"):null}constructor(...e){super(...e),r_(this,"popoverContent",()=>{var e=this.getSavingsPercent();return e?a("div",{className:rm.popOver,dangerouslySetInnerHTML:{__html:this.props.localize.string("vr_price_found_is_cheaper_than_others",{0:e,1:this.props.rental.roomCount})}}):null}),r_(this,"popoverTrigger",(e,r)=>{var n=this.getSavingsPercent();return n?t("div",{ref:e,onClick:r,className:rm.container,children:[a("span",{className:`${rm.icon} ui_icon question-circle`}),a("span",{children:this.props.localize.string("vr_savings_alert_n_percent_cheaper",{0:n})})]}):null})}},r_(eE,"defaultProps",{response:null}),eV=U((e,r,a)=>{var t=e.travelerInfo.vr;if(!t||!a)return()=>({});var{rapRate:n,rapData:i,stayLength:o}=a,{detailId:s,geoId:l}=e.page,{subtotalNumericInSessionCurrency:p}=i,{currency:c}=n,d=r(function(e){var{travelerInfo:{start:r,end:a},detailId:t,geoId:n,dailyPrice:i,currency:o}=e;return`/data/1.0/vr/priceHat/${t.toString()}?${new URLSearchParams({start:r||"",end:a||"",geoId:n.toString(),dailyPrice:parseInt(i,10).toString(),currency:o}).toString()}`}({travelerInfo:t,detailId:s,geoId:l,dailyPrice:p/o,currency:c}));return(e,r)=>({response:d.get().data,loading:d.get().loading,...r})})(eE),eO=class extends o{componentDidMount(){var{rapResponse:e}=this.props;if(e){var{rapData:r,rapRate:a,view:{stayLength:t}}=e;a&&eV.load({rapData:r,rapRate:a,stayLength:t})}}render(){var{rapResponse:e}=this.props;return e?a(eV,{rental:this.props.rental,localize:this.props.localize}):null}},ex=U((e,r)=>(eV.stage(e,r),()=>({})))(rv),eq=Object.freeze({paymentProtectionTooltipShown:{module:rg,action:"VR_PDP_PaymentProtection_Tooltip_Shown"},paymentProtectionLearnMoreClick:{module:rg,action:"VR_PDP_PaymentProtection_Learn_More_Click"},wireTransferWarningTooltipShown:{module:rg,action:"VR_PDP_WireTransferWarning_Tooltip_Shown"}}),ez=rI,eF=rw,eL=rP,eK=rk,eU=rD,eW=rE,eQ=rO,eY=rA,eA=class extends o{renderUrgencyMessaging(){var{recentViewCount:e}=this.props.rental;return e?a(eK,{recentViewCount:e}):null}render(){var{baseDailyRate:e}=this.props.rental,r=rb(this.props.rental);if(!e)return this.props.rental.isAffiliate?t("div",{children:[a(y,{onClick:this.dispatchEnterDatePrompt,size:"fullwidth",dataAttributes:rM,children:this.props.localize.string("vr_book_now")}),a(F,{event:"click",callback:e=>this.handleBookNow(e)}),this.props.rental?.isInstantBook&&a(eY,{}),a(eF,{rental:this.props.rental,locale:this.props.locale}),this.renderUrgencyMessaging(),r?a(ez,{}):null]}):a(eQ,{onSendMessage:this.dispatchEnterDatePrompt,rental:this.props.rental,buttonShouldOpenForm:!1,locale:this.props.locale});var i=this.props.rental.providerOrdinal===E?this.props.localize.string("ftl_make_inquiry"):this.props.localize.string("vr_book_now");return t("div",{children:[t("div",{className:rC.basePriceContainer,children:[a("div",{children:this.props.localize.string("vr_price_from_283")}),t("div",{children:[a("span",{className:rC.basePrice,children:this.props.globalize.formatCurrencyInteger(e)}),t("span",{children:[" /",this.props.localize.string("vr_rate_periods_c35_pl",{0:"1"})," "]}),a(X,{above:!0,message:this.props.localize.string("vr_rate_info_msg_undated_default_ffffeea6"),children:e=>a("span",{ref:e,children:a($,{name:"question-circle"})})})]})]}),a(eL,{isRbo:this.props.rental.propertyManager.isRbo}),null,this.props.rental.isOnlineBookable&&t(n,{children:[a(y,{onClick:this.dispatchEnterDatePrompt,size:"fullwidth",dataAttributes:rM,children:this.props.localize.string("vr_book_now")}),a(F,{event:"click",callback:e=>this.handleBookNow(e)}),this.props.rental?.isInstantBook&&a(eY,{})]}),!this.props.rental.isOnlineBookable&&this.props.rental.isAffiliate&&t(n,{children:[a(y,{onClick:this.dispatchEnterDatePrompt,size:"fullwidth",dataAttributes:this.props.rental.providerOrdinal===E?void 0:rM,children:i}),a(F,{event:"click",callback:e=>this.handleBookNow(e)})]}),a(eF,{rental:this.props.rental,locale:this.props.locale}),this.renderUrgencyMessaging(),!this.props.rental.isAffiliate&&a("div",{className:rC.inquiryWrapper,children:a(C,{legacyButton:!0,disableFormOpen:!0,onClick:this.dispatchEnterDatePrompt,variant:"secondary",fullWidth:!0,children:this.props.localize("vr_tip_send_message_14cd")})}),r?a(ez,{}):null,this.props.rental.isAffiliate?null:a(rB,{})]})}constructor(...e){super(...e),rT(this,"dispatchEnterDatePrompt",()=>{this.props.showEnterDate()}),rT(this,"handleBookNow",e=>{I(e.target.id)&&(e.preventDefault(),this.dispatchEnterDatePrompt())})}},ej=rV,rx.defaultProps={phoneNumber:null},eG=rx,eH=rq,rL.defaultProps={bold:!1},eZ=rL,rK.defaultProps={rateComment:null},rU.defaultProps={phoneNumber:null,recentViewCount:null,shouldOpenForm:!0},rW.defaultProps=rU.defaultProps,rQ.defaultProps=rU.defaultProps,eJ=rQ,eT=class extends o{componentDidMount(){this.setState({rapErrorEl:document.getElementById("vr-react-rap-error-root")})}render(){return this.state.rapErrorEl?ea(a(P,{in:!0,children:a(rY,{message:this.props.message})},"error"),this.state.rapErrorEl):null}constructor(...e){var r,a;super(...e),a={},(r="state")in this?Object.defineProperty(this,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):this[r]=a}},eM=class extends o{render(){var{props:e}=this,{rapData:r}=e.rapResponse;if(!r)return null;var{rapIsSplitPayment:i,rapTax:o,rapConsolidatedRate:s,rapDeposit:l,rapOwnerFees:p,rapSubtotal:c,rapFirstPayment:d,subtotalNumericInSessionCurrency:u}=r,h=rb(e.rental),f=!r.rapBaseRateInSessionCurrency||!r.subtotalNumericInSessionCurrency||r.rapBaseRateInSessionCurrency<=r.subtotalNumericInSessionCurrency,{sendMessage:m}=e,{adults:_,children:v,start:g,end:b}=e.travelerInfo;if(g&&b&&u&&e.rental.id){var N=/\//gi;w({adults:_,children:v||0,arrival:g.replace(N,"-"),departure:b.replace(N,"-"),homeId:e.rental.id,subTotal:u,currencyCode:e.currencyCode})}var S=this.props.rental?.providerOrdinal===T?this.props.localize.string("vr_taxes_and_fees"):this.props.localize.string("vr_fees_tax_81f");return t(n,{children:[a(eH,{}),f?t(n,{children:[a(eZ,{label:this.props.localize.string("vr_rap_subtotal_27a_pl",{0:e.oldView.stayLength}),price:s}),!!o&&a(eZ,{label:S,price:o}),l?a(eZ,{label:this.props.localize.string("ftl_deposit"),price:l}):null,p?a(eZ,{label:this.props.localize.string("vr_owner_fees_ffffdcba"),price:p}):null,i?a(eZ,{bold:!0,label:this.props.localize.string("ftl_subtotal"),price:c}):null]}):null,i?a(rG,{firstPayment:d}):a(rH,{subTotal:c}),a("div",{className:ry.priceHatContainer,children:a(ex,{rapResponse:this.props.rapResponse,rental:this.props.rental})}),this.state.loadingBooking?a(R,{size:"small"}):t(n,{children:[a(y,{onClick:this.goToCheckOut,size:"fullwidth",dataAttributes:rZ,children:this.props.localize.string("vr_book_now")}),a(F,{event:"click",callback:e=>{I(e.target.id)&&this.goToCheckOut(e)}}),this.props.rental.isInstantBook&&a(eY,{})]}),a(eF,{rental:e.rental,locale:e.locale}),e.rental.recentViewCount>0&&a(eK,{recentViewCount:e.rental.recentViewCount}),m?a("div",{className:ry.sendInquiryWrapper,children:a(C,{onClick:m,variant:"secondary",fullWidth:!0,legacyButton:!0,children:this.props.localize("vr_tip_send_message_14cd")})}):null,h?a(ez,{}):null,e.rental.isAffiliate?null:a(rB,{})]})}constructor(...e){super(...e),rj(this,"state",{loadingBooking:!1}),rj(this,"goToCheckOut",e=>{if(e.preventDefault(),!this.props.withLoadingSpinner){this.props.goToCheckOut();return}try{this.setState({loadingBooking:!0}),this.props.goToCheckOut()}catch(e){this.setState({loadingBooking:!1})}})}},rj(eM,"defaultProps",{sendMessage:null}),eM.defaultProps={sendMessage:null},eB=class extends o{getErrorMessage(){if(this.state.showLegacyEnterDate)return this.props.localize.string("vr_inquiry_missing_required_error_ffffdcba");var e=this.getErrors();return e&&e.length&&e[0].message}getErrors(){if(!this.props.rapResponse||!this.props.rapResponse.data)return null;var{errors:e}=this.props.rapResponse.data;return e&&e.length?e:null}hasErrors(){var e=this.getErrors();return e&&e.length}isReadOnly(){return this.props.readonlyMode}conditionalRender(){if(this.props.loading)return a(P,{in:!0,children:a(R,{size:"small"})},"loading");if(this.props.rapResponse&&this.props.rapResponse.data&&this.props.rental){var{data:e}=this.props.rapResponse,{rapData:r}=e,t=this.generateMarketingOptions(r);return this.renderTreatment(e,t)}return this.props.rental?a(P,{in:!0,children:a(ej,{onGoToFees:this.props.onGoToFees,rental:this.props.rental,showEnterDate:this.showEnterDate,readonlyMode:this.props.readonlyMode,locale:this.props.locale})},"no-dates"):null}renderErrorVariant(){if(!this.props.rental)return null;var{rental:e}=this.props,r=rb(e),{showPhoneNumber:t,propertyManager:n}=e,{typeValue:i}=n;return a(P,{in:!0,children:a(eG,{showPhoneNumber:t,typeValue:i,showBadge:r,rental:this.props.rental,locale:this.props.locale})},"error")}renderTreatment(e,r){if(!this.props.rental)return null;var{rental:n,locale:i,readonlyMode:o,currencyCode:s,travelerInfo:l}=this.props;!function(e){var{isRbo:r}=e.rental.propertyManager;N({module:rg,action:`VR_Propertytype_${r?"RBO":"PM"}_VRR`});var{errors:a}=e.rapResponse;if(a&&a.length){N({module:rg,action:"VR_RAP_ERROR_VRR"});return}if(e.rapResponse.rapData){var{isOffsiteBooking:t,rapIsSplitPayment:n}=e.rapResponse.rapData;N({module:rg,action:`VR_Paymenttype_${n?"Split":"Full"}Payment_VRR`}),t&&N({module:rg,action:"VR_Propertytype_HA_VRR"})}}({rapResponse:e,rental:n});var{rapData:p}=e;if(this.getErrorMessage())return this.renderErrorVariant();if(p&&("NONE"!==p.rapBookable||p.isOffsiteBooking)){var{view:c}=e;return t(P,{in:!0,children:[a(eM,{rapResponse:e,oldView:c,rental:n,goToCheckOut:this.goToCheckOut,withLoadingSpinner:n.providerOrdinal!==E&&!p.isOffsiteBooking&&!this.isReadOnly(),sendMessage:!function(e,r){if(!r||!r.rapData)return e.canReceiveInquiries;var{rapData:a}=r;return!!a.isInquiryAllowed&&!e.isAffiliate}(n,e)?null:r$,readonlyMode:o,locale:i,currencyCode:s,travelerInfo:l,localize:this.props.localize}),a(k,{title:"vr-detail-page-remarketing-lightbox-clickout",marketingOptions:r})]},"rap")}return this.renderInquiryTreatment()}renderInquiryTreatment(){if(!this.props.rapResponse||!this.props.rapResponse.data||!this.props.rental)return null;var{rapData:e,view:r}=this.props.rapResponse.data,t=e?e.rapSubtotal:r?.rateInfo?.localizedSubTotal;if(!t)return a(P,{in:!0,children:a(eQ,{onSendMessage:rJ,rental:this.props.rental,buttonShouldOpenForm:!0,locale:this.props.locale})},"no-rates");var{recentViewCount:n,rateComment:i}=this.props.rental,{typeValue:o}=this.props.rental.propertyManager,s=M(this.props.rental.isAffiliate,this.props.rental.providerOrdinal);return a(P,{in:!0,children:a(eJ,{makeInquiry:s?this.goToCheckOut:rJ,rapResponse:this.props.rapResponse.data,rateInfo:r.rateInfo,stayLength:r.stayLength,subtotal:t,typeValue:o,recentViewCount:n,rateComment:i,rental:this.props.rental,readonlyMode:this.props.readonlyMode,shouldOpenForm:!s})},"inquiry")}renderPossibleErrorPortal(){if(this.props.loading)return null;var e=this.getErrorMessage();return e?a(eT,{message:e}):null}render(){return t("div",{children:[this.conditionalRender(),this.props.legacy?this.renderPossibleErrorPortal():null]})}constructor(...e){super(...e),rj(this,"state",{showLegacyEnterDate:!1}),rj(this,"goToReadonlyUrl",()=>{this.props.rental&&window.open(this.props.rental.contactManagerUrl?b(this.props.rental.contactManagerUrl):"","_blank")}),rj(this,"goToAffiliateCheckOut",()=>{if(this.props.rental){var{providerOrdinal:e}=this.props.rental,{detailId:r,geoId:a,rapResponse:t,currencyCode:n,affiliateClickOffPriceSeenParams:i}=this.props;if(e){var o=V(B(e),r,a,this.props.trackingUid),s=t?.data?.rapData?.subtotalNumericInSessionCurrency?x(t.data.rapData.subtotalNumericInSessionCurrency,n):"",{viewportCategory:l}=this.props;q({detailId:r,trackingParams:o,locale:this.props.locale,checkoutSource:"property",providerOrdinal:e,amountWithCurrency:s,priceSeenAssociatedParams:i,viewportCategory:l})}}}),rj(this,"goToCheckOut",()=>{if(this.isReadOnly()){this.goToReadonlyUrl();return}if(this.props.rapResponse&&this.props.rapResponse.data&&this.props.rapResponse.data.rapData){var{isOffsiteBooking:e}=this.props.rapResponse.data.rapData,{tipQuoteToken:r}=this.props.rapResponse.data;if(this.props.monitorPotentialRevenue(),M(!!e,this.props.rental?.providerOrdinal)){this.goToAffiliateCheckOut();return}if(this.props.rapResponse){var{detailId:a}=this.props,{start:t,end:n,adults:i,children:o}=this.props.travelerInfo;D({detailId:a,start:t,end:n,adults:i,tipQuoteToken:r,kids:o,partnerParams:S()})}}}),rj(this,"datelessTracking",()=>{var{start:e,end:r}=this.props.travelerInfo;K(e,r)&&(this.props.rental?.isAffiliate?z(this.props.rental.id,this.props.geoId,this.props.trackingUid,this.props.rental.providerOrdinal):N({module:"VR_RAP_WEB_COMPONENT",action:"VR_Show_Prices_VRR"}))}),rj(this,"showEnterDate",()=>{this.props.legacy&&this.setState({showLegacyEnterDate:!0}),this.props.showMissingRequireFields&&this.props.showMissingRequireFields(),this.datelessTracking()}),rj(this,"generateMarketingOptions",e=>({vrCurrency:e?.rapSubtotalCurrency,vrBaseValue:e&&e.rapConsolidatedRateInSessionCurrency?e.rapConsolidatedRateInSessionCurrency.toString():void 0,vrTaxPrice:e&&e.taxNumericInSessionCurrency?e.taxNumericInSessionCurrency.toString():void 0,vrValue:e&&e.subtotalNumericInSessionCurrency?e.subtotalNumericInSessionCurrency.toString():void 0,pixelType:"ENTER_DATES"}))}},rj(eB,"getDerivedStateFromProps",void 0),rj(eB,"defaultProps",{legacy:!1}),eB.getDerivedStateFromProps=()=>({showEnterDate:!1}),e$=rX,eX=Object.freeze({BOOK:"BOOK",MAKE_INQUIRY:"MAKE_INQUIRY",SEND_MESSAGE:"SEND_MESSAGE"}),e0=Object.freeze({makeInquiry:{module:r1,action:"VR_Make_Inquiry_VRR"},sendMessage:{module:r1,action:"VR_Send_Message_VRR"},showPrices:{module:r1,action:"VR_Show_Prices_VRR"},RBOPropertyType:{impressionKey:"property_type",customData:{value:"rbo"}},PMPropertyType:{impressionKey:"property_type",customData:{value:"pm"}},HAPropertyType:{impressionKey:"property_type",customData:{value:"ha"}},RAPError:{impressionKey:"rap_error"},FullPaymentType:{impressionKey:"payment_type",customData:{value:"fullPayment"}},SplitPaymentType:{impressionKey:"payment_type",customData:{value:"splitPayment"}},paymentProtectionTooltipShown:{module:r1,action:"VR_PDP_PaymentProtection_Tooltip_Shown"},paymentProtectionLearnMoreClick:{module:r1,action:"VR_PDP_PaymentProtection_Learn_More_Click"},wireTransferWarningTooltipShown:{module:r1,action:"VR_PDP_WireTransferWarning_Tooltip_Shown"},priceBreakdownExpand:{module:r1,action:"VR_PDP_PriceBreakdown|Expand"},priceBreakDownCollapse:{module:r1,action:"VR_PDP_PriceBreakdown|Collapse"},...Object.freeze({errorMissingInOldAPI:(e,r)=>({impressionKey:"rap_old_api_error_missing_data",customData:{value:e,request:r}}),errorMissingInNewAPI:(e,r)=>({impressionKey:"rap_new_api_error_missing_data",customData:{value:e,request:r}}),diffInOldAndNewAPIs:(e,r,a,t)=>({impressionKey:"rap_response_diff",customData:{value:{REST:r,GQL:a},request:t}})})}),e1=Object.freeze({MAKE_INQUIRY:"MAKE_INQUIRY",SEND_MESSAGE:"SEND_MESSAGE"}),e2=i.memo(r4),e5=i.memo(r6),e4=i.memo(r3),e8=i.memo(r7),e6=i.memo(r9),e3=ar,e7=[,,,,,].fill(1e3),e9=new eI({metricName:"lbIpBMmOAI8TPFR5fba4d9bD0We2KyU6DAfRgRJYG+kAUqrryxYdqdPGZd+Zn0zaS5q5ezSuDCgFFf+SSF6f51uJSf58yX+pWXHSlrvvZVU=",version:0,additionalLabels:["lbIpBMmOAI8TPFR5fba4d/gc2Ld+OCKRyQVEDsfQuvjf0NEdjZetF6/5BlMUInKf"],labelHooks:[ew,eS,eP]}),re=at,rr=i.memo(ao),ra=i.memo(eg(e=>({reduxLocale:e.i18n.locale}))(as)),rt=i.memo(al),rn=i.memo(ap),ri=i.memo(ac),ro=i.memo(ad),rs=i.memo(au),rl=i.memo(af),rp=i.memo(eg(e=>({reduxLocale:e.i18n.locale}))(am)),rc=i.memo(a_),rd=i.memo(av),e({PriceHat:ex,RAP_ACTIONS:eX,RapContext:ru=h({state:ag}),RapContextProvider:ab,RapFooter:rd,RapView:rs,shouldShowOldBookingModule:rf,transformOldData:rh,useRapAllowedActions:r0,useRentalRate:aa})},[e=>(a=e.jsx,t=e.jsxs,n=e.Fragment),e=>(i=e.default,o=e.Component,s=e.useCallback,l=e.useMemo,p=e.useRef,c=e.useEffect,d=e.useState,u=e.useContext,h=e.createContext),e=>(f=e.default,m=e.useLocalize,_=e.useIntlFormatter,v=e.useLocale,g=e.useCurrency),e=>y=e.default,e=>b=e.default,e=>R=e.LoadingSpinner,e=>N=e.default,e=>(I=e.isClickedModalBookNow,w=e.checkPdpPriceDifference,S=e.tryGettingPartnerReference),e=>P=e.default,e=>C=e.InquiryButton,e=>k=e.PageMonikerIframe,e=>D=e.runLegacyBookingRequestFlow,e=>(E=e.HOLIDAY_LETTINGS_AFFILIATE_ORDINAL,O=e.affiliateTextLocale,A=e.usePriceSeenValidationParams,T=e.HOME_AWAY_AFFILIATE_ORDINAL,M=e.shouldUseCheckout,B=e.createPDPAffiliateTrackingAction,V=e.createAffiliateTracking,x=e.createAffiliateAmountQueryParam,q=e.affiliateCheckOut,z=e.affiliateShowPricePDP),e=>(F=e.default,L=e.useWindow),e=>K=e.isDateLess,e=>U=e.bind,e=>W=e.default,e=>(Q=e.useGARecorder,Y=e.useGARecordCallback),e=>j=e.Link,e=>G=e.featureIsEnabled,e=>H=e.default,e=>(Z=e.useMetaRolloutTest,J=e.useNewRapApiFeatureFlag),e=>$=e.Icon,e=>X=e.default,e=>ee=e.default,e=>er=e.default,e=>ea=e.createPortal,e=>et=e.useMonitorPotentialRevenue,e=>en=e.useViewportCategory,e=>ei=e.useImpressionLogger,e=>eo=e.useTravelInfo,e=>(es=e.default,el=e.margin,ep=e.flex),e=>ec=e.HoverTooltip,e=>ed=e.default,e=>eu=e.usePageviewUid,e=>(eh=e.dateDiffInDays,ef=e.formatToYearMonthDate),e=>em=e.usePixelCallback,e=>(e_=e.default,ev=e.BorderlessButton),e=>eg=e.connect,e=>ey=e.Spinner,e=>eb=e.default,e=>eR=e.difference,e=>eN=e.usePollingQuery,e=>(eI=e.Counter,ew=e.useSourceLabel,eS=e.useViewportLabel,eP=e.useWebApplicationLabel),e=>eC=e.default,e=>ek=e.CdnImage,e=>eD=e.default]]},["121h32","1o4yt4","17thqz","4nzso8","1j8lyt","1l9qeu","4axon3","xlpvch","1kcvbr","1e32ha","1chtw0","1iroa0","68adql","ltllz9","1abxv6","16z5q2","14q9l4","32pwc7","bvvaww","skjzuv","fkji80","1ipqm0","1ybxsm","wt5b21","1essqv","hjfzd7","1nnmev","rvduqy","1ys6v1","klbwtj","1etaac","gw8uw6","1xm2jz","zq967r","fgwvq1","123p81","1emwhd","jppfwt","12mj4n","1qndsd","1u47wj","xvco8h","1fbuhs","183pm0","covaqn","1s6q22","lr6tb6"]]);
