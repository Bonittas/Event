(this.$WP=this.$WP||[]).push(["15h0me",(e,t)=>{var a,i,n,r,o,d,l,s,c,u,_,m,h,p,f,g,v,T,N,b,y,I={noteTitle:"stPco",noteContent:"ksZLO",button:"xTanC f F",alertContainer:"Pj PN Pw PA"},w={__key:3296052691956,id:"02ff6c0cc3f47751bc0fad2b5f456b60",loc:{},definitions:[]},x={__key:0x6c30689fa462,id:"6c30689fa46228a6d2d730f8481a4d92",loc:{},definitions:[]};function A({variant:e,noteTitle:t,noteBody:A,noteId:E,tripId:C,onClose:k}){var[L,P]=r(t??""),[D,M]=r(A??""),[O,S]=r(""),[j,z]=r(""),[q,R]=r(null),F=o(null),V=v(),W=T(C),{localize:Y}=p(),{getTripErrorMessage:$}=f(),[{fetching:B},Z]=g(w),[{fetching:G},H]=g(x),J=N(C),K=b(),Q="EDIT"===e,U=Q?"Edit note":"Add a note",X=Q?"Apply":"Add to trip",ee=i(n,{children:[a(h,{display:"inline-block",variant:"supporting-03",children:"Title"})," ",a(h,{display:"inline-block",variant:"supporting-01",children:"(optional)"})]});d(()=>{Q||K({itemName:"AddNoteModal"})},[Q,K]),d(()=>{null!==q&&F.current?.scrollIntoView({behavior:"smooth",block:"end"})},[q]),d(()=>{V({itemName:"AddNoteModal"})},[V]);var et=l(async()=>{if(Q?(e=await H({noteId:E??0,title:L,body:D}),t=e?.data?.updateTripNote?.errors):(J({itemName:"SubmitNoteClick",customData:{note:D}}),e=await Z({tripId:C??0,title:L,body:D}),t=e?.data?.addNoteToTrip?.errors),t?.length){var e,t,a=t.find(e=>e?.field==="NOTE_TITLE");a&&S($("EDIT_TRIP",a));var i=t.find(e=>e?.field==="NOTE_BODY");i&&z($("EDIT_TRIP",i))}if(O||j)throw new y("Validation error");if(e.error)throw Error(e.error.message)},[H,Z,Q,C,E,L,D,O,j,$,J]),ea=l(async()=>{if(D&&0!==D.trim().length)try{await et(),k(),W({itemName:"SuccessfulNoteAdd",customData:{note:D}})}catch(e){if(e instanceof y)return;R($("ADD_NOTE"))}else z("Note body cannot be empty!")},[k,$,et,D,W]);return a(u,{onClose:k,variant:"fixed-height-sticky-footer",widthOption:"fixed-60",title:U,buttonsAlignment:"right",children:i("div",{"data-automation":"trip_add_or_edit_note_modal",children:[a("div",{className:I.noteTitle,children:a(_,{id:"new_trip_note_title",name:"title",label:ee,value:L,errorText:O,maxLength:100,placeholder:"(e.g., Transit in the city)",onChange:e=>{R(null),S(""),P(e.target.value)},"data-automation":"trip_add_or_edit_note_modal_title_input"})}),a("div",{className:I.noteContent,children:a(m,{variant:"five-line",id:"trip_description",name:"description",label:"Your note",value:D,errorText:j,state:j?"error":void 0,maxLength:1e3,characterCountType:"max",placeholder:"(e.g., Need to decide if we should rent a car or take a train)",onChange:e=>{R(null),(e.target.value||0!==e.target.value.trim().length)&&j&&z(""),M(e.target.value)},"data-automation":"trip_add_or_edit_note_modal_body_input"})}),a("div",{className:I.button,children:a(c,{"aria-label":Y.string("common_Loading"),loading:B||G,onClick:ea,dataAttributes:{"data-automation":"trip_add_or_edit_note_modal_save_button"},children:X})}),q?a("div",{className:I.alertContainer,ref:F,"data-automation":"trip_add_or_edit_note_modal_error_alert",children:a(s,{variant:"warning","aria-live":"assertive",children:q})}):null]})})}return e("AddOrEditNoteModal",A),[()=>{y=class extends Error{},e("AddOrEditNoteModal",A)},[e=>(a=e.jsx,i=e.jsxs,n=e.Fragment),e=>(r=e.useState,o=e.useRef,d=e.useEffect,l=e.useCallback),e=>s=e.InlineAlert,e=>c=e.default,e=>u=e.Modal,e=>(_=e.TextInput,m=e.TextArea),e=>h=e.default,e=>p=e.useLocalize,e=>f=e.useLocalizeTripError,e=>g=e.useTripMutation,e=>(v=e.useManagementImpressionLogger,T=e.useManagementInteractionLogger,N=e.useSavesInteractionLogger,b=e.useSavesImpressionLogger)]]},["121h32","1o4yt4","lt9m20","jppfwt","1i3sz5","1u3aio","1essqv","17thqz","mc5s4b","1r6ayw","sa2a6q"]]);
