(this.$WP=this.$WP||[]).push(["yug3zc",(e,i)=>{var t,a,o,s,l,n,r,d,p,h,g,m,c,u,b,v,y,D,N,O,f,T,S,I,P,w,G,_,C,E,A,M,L,k,R,H,x,B,z,F,q=e=>{R().dispatch(H.page.hotels.setGoogleOneTapOpen(e))},U={homeLocationPrompt:"qrKQS D C z",avatar:"OBuqK",noAvatarIcon:"MOOfE",headline:"uhaFN",subhead:"mSHxy",innerContainer:"IEBQA",innerContainerMobile:"HgGJN",homeLocationPromptMobile:"QjdMj",homeLocationPromptDesktopTablet:"JjknH",geoSelectorContainer:"Pdntt",geoSelectorFlexItem:"fzeJB",geoSelector:"igiwF",submitArrow:"uYaJY",submitButton:"tvQbB"},j=({mutation:e,variables:i,onCompleted:a,className:o,children:s,textInputIsValid:l})=>t(I,{query:e,children:({executeMutation:e})=>t("form",{className:o,onSubmit:t=>{t.preventDefault&&t.preventDefault(),l()&&e(i).then(({data:e})=>{a&&a(e)})},children:s})}),K={__key:0x78187f1ed93b,id:"78187f1ed93b36379ac28f572f118122",loc:{},definitions:[]},Q={__key:22284245845108,id:"1444748ec4743acae16c5bcbca3f3b92",loc:{},definitions:[]},V="homePromptDismissed",J=["CheapFlightsSearchResults","CheapFlightsSearchDeals","MobileCheapFlightsSearchResults","MobileCheapFlightsSearchDeals","OptimusHotelCheckout","OptimusSubscriptionCheckout"],W=e=>{var{localize:i}=D(),{userAgentCategory:o}=G(),n="MOBILE"===o,r="DESKTOP"===o,{params:d}=w(),{newPlusSubscriber:p=!1}=d,h={bottom:"0"},[g,m]=s({type:"location_id",value:"1",displayValue:""}),[c,u]=s(""),[b,I]=s(!1),_=e=>{u(e)},C=e=>{m(e),u(e.value)},E=n?U.homeLocationPromptMobile:U.homeLocationPromptDesktopTablet,A=n?U.innerContainerMobile:U.innerContainer,M={hometown:g.value?Number(g.value):null,userId:e.userId},L=()=>i("I_live_in"),k=()=>i("home_location_things_near_you"),R=i=>{O({module:"Home_Location_Prompt",action:i,context:e.servlet||"unknown"})},H=i=>{var t=i?.memberProfile?.hometown?.locationId,a=Date.now()-(i?.insightProfile?.uiCardsState?.timestamp||0)<864e5,o=N.get(V),s=J.includes(e.servlet);return p||e.isInterstitialOpen||!(n||r)||t||a||o||s},x=()=>{b||(R("Shown_Prompt"),I(!0))};return l(()=>{if(e.ipGeoId&&e.ipGeoId>1&&e.ipGeoNameAndParentName&&""!==e.ipGeoNameAndParentName){var i={type:"location_id",value:e.ipGeoId.toString(),displayValue:e.ipGeoNameAndParentName};m(i),u(i.value)}},[e.ipGeoId,e.ipGeoNameAndParentName]),t(P,{query:Q,variables:{userId:e.userId},children:({fetching:i,data:o})=>i||H(o)?null:(x(),e.onShown(),t(B,{variables:M,onCompleted:i=>{i?.updateMemberProfile?.status==="OK"&&(R("Change_Location"),e.onComplete(!0))},textInputIsValid:()=>g&&""!==g.value&&g.value===c,mutation:K,children:a("div",{className:v(U.homeLocationPrompt,E),style:h,children:[t("span",{className:U.avatar,children:o?.memberProfile?.avatar?t(T,{photo:o?.memberProfile?.avatar}):t(S,{name:"member",className:U.noAvatarIcon})}),t(y,{colorVariant:"TA_GRAY_3",onClick:()=>{N.set(V,!0),R("Closed_Prompt"),e.onDismiss()}}),a("div",{className:A,children:[t("p",{className:U.headline,children:L()}),t("p",{className:U.subhead,children:k()}),a("div",{className:U.geoSelectorContainer,children:[t("div",{className:U.geoSelectorFlexItem,children:t(f,{className:U.geoSelector,selectedLocation:g,selectionChanged:C,textInputChanged:_,iconType:"map-pin-fill",mode:"cities",includeWorld:!1,resultsAbove:n,max:n?4:8})}),t("button",{className:U.submitButton,children:t(S,{name:"arrow-right",className:U.submitArrow})})]})]})]})}))})};function Y(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}var $=[40185,40600],X=({dismiss:e,props:i,onGoogleOneTapDismiss:a,onGoogleOneTapTriggerNext:o})=>{var[n,r]=s(!i.delayOneTap);return l(()=>{var e;return i.delayOneTap&&(e=setTimeout(()=>{r(!0)},2e4)),()=>clearTimeout(e)},[i.delayOneTap]),n?t(L,{children:t(d,{children:t(F,{onDismiss:()=>{e(),a()},onShow:()=>q(!0),triggerNext:o,servletName:i.servlet})})}):null},Z=e=>{var i=m();return i.fetching?null:t(ee,{...e,hardGateEligibility:i})},ee=e=>{var{isDelayVariant:i,fetching:a}=_(),o=n(k,[]);return t(x,{...e,delayOneTap:i,fetchingOneTapUpdates:a,hardGateImpressionKey:o})};return[()=>{j.defaultProps={onCompleted:()=>{},className:"",children:null},B=j,z=h((e,i)=>{var t=i("/data/1.0/homelocation/ipGeoInfo");return()=>{var i=t&&t.get().data;return{servlet:e.meta.initialServletName,userId:e.auth.loggedInUserId,viewportCategory:e.meta.device.viewportCategory,ipGeoId:i?.ipGeoId,ipGeoNameAndParentName:i?.ipGeoNameAndParentName,isInterstitialOpen:e.page.isInterstitialOpen}}})(W),F=p(()=>i("1j3bsm")),x=class extends r{componentDidMount(){var e=E(this.props.sessionId);if(this.initialDialogType=this.decideInitialDialogType(e),"NONE"===this.initialDialogType){b("reg_dialog").emit("all_dismissed");return}this.setupRegDialog(),this.setState({suppressRegDialog:e&&"HARD_GATE"!==this.initialDialogType})}componentDidUpdate(e){!e.isMember&&this.props.isMember&&this.disableDialog()}render(){var{dialogsDisabled:e,dialogType:i,suppressRegDialog:s}=this.state,l=()=>null,n=[],r="registration_dialog";if(e)return null;switch(i){case"GOOGLE_ONETAP":n=["google_one_tap"],l=({dismiss:e})=>t(X,{dismiss:e,props:this.props,onGoogleOneTapDismiss:this.onGoogleOneTapDismiss,onGoogleOneTapTriggerNext:this.onGoogleOneTapTriggerNext}),r="google_one_tap";break;case"HARD_GATE":n=["hard_gate"],l=({dismiss:e})=>t(c,{eligibility:this.props.hardGateEligibility,impressionKey:this.props.hardGateImpressionKey,children:t(C,{onLogin:e})}),r="hard_gate"}var d=s||this.props.isMember||this.props.isPaywallBlocking;return"HOME_LOCATION_PROMPT"===i?a(o,{children:[null,null,t(z,{onDismiss:this.onHomeLocationDismiss,onShown:this.onHomeLocationShown,onComplete:this.onHomeLocationComplete})]}):!(n.length>0)||this.props.fetchingOneTapUpdates||d?null:a(o,{children:[null,null,t(g,{factory:l,eventTypes:n,renderKey:r,tier:200})]})}constructor(e){super(e),Y(this,"onGoogleOneTapDismiss",()=>{A(this.props.sessionId),q(!1)}),Y(this,"onGoogleOneTapTriggerNext",()=>{this.setState({dialogType:"NONE"})}),Y(this,"onHomeLocationDismiss",()=>{this.setState({dialogType:"NONE"})}),Y(this,"onHomeLocationComplete",()=>{this.setState({dialogType:"NONE"})}),Y(this,"onHomeLocationShown",()=>{b("home-location-prompt").emit("shown")}),Y(this,"onRegistrationOverlayShown",(e,i)=>{$.includes(i)||this.setState({dialogsDisabled:!0})}),Y(this,"setupRegDialog",()=>{if(b("Onboarding").on("loginSuccess",this.disableDialog),b("registration-overlay").on("shown",this.onRegistrationOverlayShown),b("FlightList").on("AirwatchInterstitialOpened",this.disableDialog),M.includes(this.props.servlet)||"ShowUserReviews"===this.props.servlet||"MobileShowUserReviews"===this.props.servlet){if(b("DatePicker").on("clicked",this.disableDialog),b("global-nav").on("sidebarOpened",this.disableDialog),b("hotels-sort-filter-entry").on("openSort",this.disableDialog),b("hotels-sort-filter-entry").on("openFilters",this.disableDialog),b("hr-persistent-footer").on("show",this.disableDialog),b("h-map").on("open-trigger-clicked",this.disableDialog),b("h-map").on("toggle-trigger-clicked",this.disableDialog),b("rooms-guests").on("popped",this.disableDialog),this.props.defaultDates&&!u.wasDismissed(this.props.detailPage)&&"MOBILE"===this.props.viewportCategory){b("rooms-guests").on("firstUserUpdate",this.enableDialog),b("picker-autoadvance").on("flow-complete",this.enableDialog),b("pop-calendar").on("dismissed",this.enableDialog);return}b("responsiveStayDates").on("calendarInteracted",this.disableDialog)}this.enableDialog()}),Y(this,"initialDialogType",void 0),Y(this,"decideInitialDialogType",e=>{var i=!this.props.isMember&&!e,t=this.props.isMember,a="NONE";return this.props.hardGateEligibility.showHardGate?a="HARD_GATE":i?a="GOOGLE_ONETAP":t&&(a="HOME_LOCATION_PROMPT"),a}),Y(this,"enableDialog",()=>{"NONE"===this.state.dialogType&&this.setState({dialogType:this.initialDialogType})}),Y(this,"disableDialog",()=>{"NONE"!==this.state.dialogType&&this.setState({dialogType:"NONE",dialogsDisabled:!0})}),this.state={dialogType:"NONE",dialogsDisabled:!1,suppressRegDialog:!0}}},e("default",h({data:(e,i)=>(z.stage(e,i),()=>({isMember:e.auth.isMember,isDatePickerPage:e.page.isDatePickerPage,isPaywallBlocking:e.page.isPaywallBlocking,sessionId:e.tracking.sessionId,viewportCategory:e.meta.device.viewportCategory,servlet:e.meta.initialServletName,defaultDates:!!(e.travelerInfo.hotels||{}).defaultDates,detailPage:!!e.page?.detailId})),actions:{}})(Z))},[e=>(t=e.jsx,a=e.jsxs,o=e.Fragment),e=>(s=e.useState,l=e.useEffect,n=e.useMemo,r=e.Component,d=e.Suspense,p=e.lazy),e=>h=e.bind,e=>g=e.PopupHierarchyRender,e=>(m=e.useHardGateEligibility,c=e.HardGateContextProvider),e=>u=e.default,e=>b=e.createRadio,e=>v=e.default,e=>y=e.CloseIcon,e=>D=e.useLocalize,e=>N=e.default,e=>O=e.default,e=>f=e.GeoSelector,e=>T=e.Avatar,e=>S=e.Icon,e=>(I=e.Mutation,P=e.Query),e=>w=e.useRoute,e=>G=e.useUserAgent,e=>_=e.useGoogleOneTapUpdates,e=>C=e.default,e=>(E=e.shouldSuppressRegistrationDialog,A=e.setRegDialogDismissed,M=e.HOTEL_SERVLETS),e=>L=e.ErrorBoundary,e=>k=e.uuid,e=>(R=e.getStore,H=e.actions)]]},["121h32","1o4yt4","16z5q2","18pymb","igyuz7","losr6p","1bqgab","fkji80","1uzmmz","17thqz","19b9b1","4axon3","1uaudg","dl4tf4","1ybxsm","1mqwhq","fgwvq1","1nnprh","wsk8ra","cjerkd","cyrz7y","183pm0","1eww82","45ddp0"]]);
