(this.$WP=this.$WP||[]).push(["xznza0",(t,e)=>{var i,a,o,n,r,l,d,c,m,s,u,p,h,v,b,_,g,I,y,f,C,N,w,k,S,T,P,O,j,A,x,M,R,D,z,E,L,V,B,W,H,U,G,Q,F,q=t=>{var e=[];return t.thumbnail?.photoSizes&&e.push(t.thumbnail.photoSizes),t.photos?.length&&e.push(...t.photos.filter(e=>!!e&&e.id!==t.thumbnail?.id).map(t=>t?.photoSizes).filter(Boolean)),e.slice(0,4)},K=t=>{if(t){var e=m(t);if(e)switch(t.__typename){case"Trips_LocationItemObject":return{id:e,type:"location"};case"Trips_ReviewItemObject":return{id:e,type:"review"};case"Trips_LinkPostItemObject":return{id:e,type:"link"};case"Trips_AttractionItemObject":return{id:e,type:"attractionProduct"};case"Trips_PhotoItemObject":return{id:e,type:"photo"};case"Trips_VideoItemObject":return{id:e,type:"video"};case"Trips_NoteItemObject":return{id:e,type:"note"};case"Trips_ForumPostItemObject":return{id:e,type:"post"};case"Trips_RepostItemObject":return{id:e,type:"repost"};default:return}}},J={container:"XlrGL",imageContainer:"OKOJH o",rightSection:"qICCH",label:"TkvrX",commentSection:"mzFFg",infoSummary:"KQUph k",main:"jNvXQ",bookingInfoMobile:"aQpyM",bookingInfoDesktop:"nKYeH e k",descriptionContainer:"ktrNT"},X={container:"f e _c",creationDataWrapper:"f Mk"},Y=({children:t,redirectUrl:e,onClick:a,dataAttributes:o})=>e?i(S,{theme:"standalone",href:e??"",target:"_blank","data-automation":o?.["data-automation"],children:t}):a?i(T,{leftAlign:!0,onClick:a,dataAttributes:o,children:t}):t,$=({title:t,body:e,author:o,date:n,titleOnClick:r,titleRedirectUrl:l})=>{var{localize:c}=j(),m=A(),s=new Date(Date.parse(n??"")),u=isNaN(s.getTime())?null:m.formatDate("date_medium_month_year",s);return a("div",{className:X.container,children:[!!t&&i(Y,{onClick:r,redirectUrl:l,dataAttributes:{"data-automation":"trip_item_title"},children:i(d,{variant:"title-04",marginBottom:"spacing-01",children:t})}),i(O,{ctaNewline:!0,numLinesToShow:3,webkitLineClamp:!0,collapsible:!0,cta:i(T,{variant:"primary-small",dataAttributes:{"data-automation":"trip_item_description_read_more_button"},children:c.string("common_Read_more")}),ctaCollapse:i(T,{variant:"primary-small",dataAttributes:{"data-automation":"trip_item_description_read_less_button"},children:c.string("common_Readless")}),children:i(d,{variant:"supporting-01",whiteSpace:"break-spaces",dataAttributes:{"data-automation":"trip_item_description"},children:e})}),(o||u)&&a("div",{className:X.creationDataWrapper,children:[!!o&&i(d,{variant:"supporting-03",dataAttributes:{"data-automation":"trip_item_author"},children:o}),!!o&&!!u&&i(d,{variant:"supporting-01",children:`\xa0â€¢\xa0`}),!!u&&i(d,{variant:"supporting-01",dataAttributes:{"data-automation":"trip_item_date"},children:u})]})]})},Z={container:"WXEkr Ra",vertical:"IpaTh",leftSection:"tGwEf _V",rightSection:"KJMLC e",iconButtons:"QTtiI u",icon:"BBkVc u",ctaDesktop:"ltbJg",ctaMobile:"vzZZQ",content:"cvvMk"},tt=({tripId:t,itemId:e,content:o,icon:n,ctaType:l="save",menuOptions:d,saveObject:m,hideMenu:u,comments:p,actionPermissions:h,dataAttributes:b,direction:_="horizontal",onVisible:g})=>{var{refetch:f}=s(),{localize:C}=j(),[N,w]=r(!1),k=c(()=>w(!0)),S=c(g),T=y(t),O=m?.id&&m?.type&&t&&e?i(v,{tripId:t,itemId:e,saveObject:m,inViewport:N,isOwner:!!h?.canEdit,onSaveComplete:f,onClick:()=>{T({itemName:"HeartButtonClick",customData:{itemId:e}})},onUnsaveComplete:()=>{f(),T({itemName:"ConfirmRemoveItemClick",customData:{itemId:e}})}}):null,A=d?i(M,{items:d,above:!0,alignEdge:"right",children:(t,e)=>i(P,{ref:t,"aria-label":C.string("mw_common_menu_fffffd37"),onClick:e,variant:"primary",size:"medium",icon:x})}):void 0,D="save"===l?O:"menu"!==l||u?void 0:A;return a("div",{className:R(Z.container,{[Z.vertical]:"vertical"===_}),...b,ref:S,children:[a("div",{className:R(Z.leftSection,{[Z.vertical]:"vertical"===_}),children:[(n||D)&&a("div",{className:Z.iconButtons,children:[n&&i("div",{className:Z.icon,children:n}),D&&"vertical"===_&&i("div",{className:Z.ctaDesktop,children:D}),D&&i("div",{className:Z.ctaMobile,children:D})]}),i("div",{className:Z.content,children:o})]}),a("div",{className:R(Z.rightSection,{[Z.vertical]:"vertical"===_}),ref:k,children:[D&&"horizontal"===_&&i("div",{className:Z.ctaDesktop,children:D}),i(I,{tripId:t,itemId:e,comments:p,variant:"CONTENT-CARD",actionPermissions:h})]})]})},te={itemContainer:"lcxpT f",itemImageContainer:"RmhUi o",itemTextContainer:"NM"},ti=({trip:t,item:e,review:n,dataAttributes:r,onVisible:l})=>{var c=K(e.object),{location:m,rating:s,title:u,text:p,userProfile:h,createdDate:v,route:b}=n,_=a(o,{children:[n.location&&a("div",{className:te.itemContainer,children:[m?.thumbnail?.photoSizes&&i("div",{className:te.itemImageContainer,"data-automation":"trip-item-review-image",children:i(k,{source:m.thumbnail?.photoSizes,aspectRatio:"1:1"})}),a("div",{className:te.itemTextContainer,children:[m?.name&&m?.url&&i(S,{theme:"standalone",href:m.url||"",target:"_blank",children:i(d,{lineClamp:2,variant:"supporting-03",marginBottom:"spacing-02",dataAttributes:{"data-automation":"trip_item_location_name"},children:m.name})}),m?.reviewSummary?.rating&&m?.reviewSummary?.count&&i("div",{"data-automation":"trip_item_location_bubble_rating",children:i(N,{size:"small",rating:m.reviewSummary?.rating,numReviews:m.reviewSummary?.count})}),i(d,{variant:"supporting-01",marginTop:"spacing-02",dataAttributes:{"data-automation":"trip_item_location_geo_name"},children:m?.geoName})]})]}),s&&i("div",{"data-automation":"trip_item_bubble_rating",children:i(w,{rating:s,marginBottom:"spacing-01",size:"small"})}),i($,{title:u||"",body:p||"",author:h?.username||"",date:v||"",titleRedirectUrl:b?.url||""})]});return i(tt,{tripId:t.id,icon:i(C,{color:"onLightText",size:22}),saveObject:c,content:_,itemId:e.id,comments:e.comments,actionPermissions:t.actionPermissions,dataAttributes:r,onVisible:l})},ta=({trip:t,item:e,post:a,dataAttributes:o,onVisible:n})=>{var r=K(e.object),l=i($,{title:a.topicTitle||"",body:a.body||"",author:a.userProfile?.displayName||"",date:a.publishedDate||"",titleRedirectUrl:a.route?.url||""}),d=i(D,{});return i(tt,{tripId:t.id,itemId:e.id,content:l,saveObject:r,ctaType:"save",icon:d,comments:e.comments,actionPermissions:t.actionPermissions,dataAttributes:o,onVisible:n})},to=(t,e,i)=>e?"Media_PhotoResult"===e.__typename?{locationName:i?.localizedName??null,reviewSummary:i?.reviewSummary??null,photoSource:e.photoSizeDynamic??null,caption:e.caption??null,id:e.photoId??null,author:e.memberProfile?.displayName??null,attribution:e.attribution?.text??null}:"Media_VideoResult"===e.__typename?{locationName:i?.localizedName??null,reviewSummary:i?.reviewSummary??null,id:e.videoId??null,videoThumbnail:e?.thumbnails?.[0]?.url??null,videoSources:e.sources??null,caption:e.caption??null,author:e.memberProfile?.displayName??null,attribution:e.attribution?.text??null}:null:null,tn=({imageSource:t,onModalClose:e})=>i(E,{widthOption:t.maxHeight>t.maxWidth?"variable":"fixed-60",onClose:e,children:i("div",{"data-automation":"trip_item_modal_photo",children:i(k,{source:t})})}),tr=({videoSources:t,onModalClose:e})=>i(E,{widthOption:"fixed-60",variant:"variable-height",onClose:e,children:i("video",{controls:!0,controlsList:"nodownload",muted:!0,autoPlay:!0,playsInline:!0,disablePictureInPicture:!0,width:"100%",height:"100%","data-automation":"trip_item_modal_video",children:t?.map(t=>i("source",{width:t.width,height:t.height,src:t.url},t.url))})}),tl={aboveImageContentWrapper:"MJ",imageWrapper:"ORoTW o",belowImageContentWrapper:"f K Q1 Mk",expandIcon:"VScLx Gi"},td=({trip:t,item:e,media:n,photoVideoLocationsMap:l,dataAttributes:c,onVisible:m})=>{var s=K(e.object),u=e.object?.__typename==="Trips_PhotoItemObject"?"PHOTO":"VIDEO",p=null;"Media_VideoResult"===n.__typename?p=l?.get(Number(n.locationId))||null:"Media_PhotoResult"===n.__typename&&(p=l?.get(Number(n.locationId))||null);var[h,v]=r(!1),b=Q(u,n,p),_="PHOTO"===u,g="VIDEO"===u;return!b||_&&(!b.photoSource||null===b.photoSource.urlTemplate||null===b.photoSource.maxHeight||null===b.photoSource.maxWidth)||g&&(null===b.videoPageUrl||null===b.videoThumbnail)?null:a(o,{children:[i(tt,{tripId:t.id,saveObject:s,itemId:e.id,comments:e.comments,actionPermissions:t.actionPermissions,dataAttributes:c,content:a("div",{children:[!!b.locationName&&a("div",{className:tl.aboveImageContentWrapper,children:[i(d,{variant:"title-04",dataAttributes:{"data-automation":"trip_item_location_name"},children:b.locationName??""}),!!b.reviewSummary?.count&&!!b.reviewSummary?.rating&&i("div",{"data-automation":"trip_item_bubble_rating",children:i(N,{size:"small",numReviews:b.reviewSummary.count,rating:b.reviewSummary.rating})})]}),a("div",{className:tl.imageWrapper,children:[_&&a(o,{children:[i("div",{className:tl.expandIcon,children:i(T,{onClick:()=>v(!0),dataAttributes:{"data-automation":"trip_item_expand_photo"},children:i(z,{size:24,color:"primaryIcon"})})}),i("div",{"data-automation":"trip_item_photo_image",children:i(k,{height:135,source:b.photoSource})})]}),g&&a(o,{children:[i("div",{className:tl.expandIcon,children:i(T,{onClick:()=>v(!0),dataAttributes:{"data-automation":"trip_item_expand_video"},children:i(z,{size:24,color:"primaryIcon"})})}),i("div",{"data-automation":"trip_item_video_thumbnail",children:i(k,{height:135,source:b.videoThumbnail})})]})]}),(!!b?.author||!!b?.caption||!!b?.attribution)&&a("div",{className:tl.belowImageContentWrapper,children:[!!b.author&&i(d,{variant:"supporting-03",dataAttributes:{"data-automation":"trip_item_posted_by"},children:`Posted by ${b.author}`}),!b.author&&!!b?.attribution&&i(d,{variant:"supporting-03",dataAttributes:{"data-automation":"trip_item_attribution"},children:b?.attribution}),""!==b.caption&&i(d,{variant:"supporting-01",dataAttributes:{"data-automation":"trip_item_caption"},children:b.caption??""})]})]}),onVisible:m}),g&&h&&i(tr,{videoSources:b.videoSources,onModalClose:()=>v(!1)}),_&&h&&i(tn,{imageSource:b.photoSource,onModalClose:()=>v(!1)})]})},tc=(t,e)=>t?e?{title:t.preview?.title??null,body:t.preview?.canonicalUrl??null,author:t.userProfile?.displayName??null,date:t.updated??null}:{title:t.title??null,body:t.body??null,author:t.author?.displayName??null,date:t.updated??null,authorId:t.author?.userId??null}:null,tm={__key:0xfa2297730059,id:"fa229773005962f8952c1428b5c4373b",loc:{},definitions:[]},ts={__key:0x63d0df7327f8,id:"63d0df7327f8ae42e1e71e140caee83d",loc:{},definitions:[]},tu=t=>t.object?.__typename==="Trips_LinkPostItemObject"?t.object.linkPostId:t.object?.__typename==="Trips_NoteItemObject"?t.object.noteId:null,tp=({trip:t,item:e,note:n,dataAttributes:l,onVisible:d})=>{var c=e.object?.__typename==="Trips_LinkPostItemObject",m=tu(e),[s,p]=r(!1),h=F(n,c??!1),[{fetching:v},b]=u(tm),[,_]=u(ts),g=f(),{launchErrorToast:I,launchItemRemovedToast:y}=V(),C=U(),N=t.actionPermissions?.canEdit&&h?.authorId===C;if(!h||!h.body)return null;var w=[{onClick:()=>{v||b({tripId:t.id,itemId:e.id??0}).then(e=>{if(e.error)throw e.error;y(t.title??void 0,()=>_({tripId:t.id,id:String(m),type:c?"link":"note"})),g({itemName:"RemoveNote"})}).catch(()=>{I()})},content:"Delete note",key:"delete-note",icon:H,iconColor:"dangerIcon",textColor:"dangerText",dataAttributes:{"data-automation":"trip_item_delete_note"}}];return c||w.unshift({onClick:()=>p(!0),content:"Edit Note",key:"edit-note",icon:W,dataAttributes:{"data-automation":"trip_item_edit_note"}}),a(o,{children:[!c&&s&&i(B,{variant:"EDIT",noteId:m??0,noteTitle:h.title??"",noteBody:h.body??"",onClose:()=>p(!1)}),i(tt,{tripId:t.id,itemId:e.id,comments:e.comments,ctaType:"menu",direction:"vertical",menuOptions:w,icon:i(L,{}),actionPermissions:t.actionPermissions,dataAttributes:l,content:i($,{titleOnClick:!c&&N?()=>p(!0):null,titleRedirectUrl:c?h.body:null,title:h.title??null,body:h.body,author:h.author??null,date:h.date??null}),hideMenu:c?!t.actionPermissions?.canEdit:!N,onVisible:d})]})};return[()=>{G=n(({trip:t,item:e,location:o,dataAttributes:n,restaurantsHourOptionsMap:m,onCommerceClick:u,onVisible:f},C)=>{var{refetch:N}=s(),[w,k]=r(!1),S=c(()=>{f?.(),k(!0)}),T=y(t.id),P=K(e.object),O=e.comments||[],j="GENERATIVE_AI"===e.creationMethod,A=j?e.narrativeDescription?.plainText:o.locationDescription,x=l(()=>q(o),[o]),{rating:M,ratingCounts:R}=o.reviewSummary||{},D=R&&R.reduce((t,e)=>null!==t&&null!==e?t+e:t,0),{awardType:z,year:E}=o.locationV2?.bestAwardForActiveYearV2||{},L=i(p,{tripItem:o,trip:t,isAIGenerated:j,recommendedProduct:e.recommendedProduct,pauseQuery:!w,onCommerceClick:u});return a("div",{ref:C,className:J.container,...n,children:[i("div",{children:i("div",{className:J.imageContainer,"data-automation":"trip_item_carousel_image",children:i(h,{itemLink:o.route?.url||"",photos:x,action:P?.id&&P?.type&&t?.id&&e?.id?i(v,{tripId:t.id,itemId:e.id,saveObject:P,inViewport:w,isOwner:!!t.actionPermissions?.canEdit,onSaveComplete:N,onClick:()=>{T({itemName:"HeartButtonClick",customData:{itemId:e.id}})},onUnsaveComplete:()=>{N(),T({itemName:"ConfirmRemoveItemClick",customData:{itemId:e.id}})}}):null,travelersChoiceAwardData:z&&E?{awardType:z,awardYear:E}:void 0})})}),a("div",{className:J.rightSection,ref:S,children:[a("div",{className:J.infoSummary,children:[a("div",{className:J.main,children:[i(b,{title:o.name,content:i(_,{item:o,variant:"extended",pauseQuery:!w,restaurantsHourOptionsMap:m,tripDateType:t.date?.type}),labels:o.isGeo?null:o.geoName&&i("span",{"data-automation":"trip_item_label",children:i("div",{className:J.label,children:i(d,{variant:"label-01",color:"inherit",elementType:"span",children:o.geoName})})}),itemLink:o.route?.url||"",reviewData:M&&D?{reviewCount:D,rating:M}:void 0}),A&&i("div",{className:J.descriptionContainer,children:i(g,{descriptionText:A||"",isAIGenerated:j})}),i("div",{className:J.bookingInfoMobile,"data-automation":"trip_item_commerce_info_mobile",children:L})]}),i("div",{className:J.bookingInfoDesktop,"data-automation":"trip_item_commerce_info_desktop",children:L})]}),i("div",{className:J.commentSection,children:i(I,{tripId:t.id,itemId:e.id,comments:O,variant:"IMAGE-CARD",actionPermissions:t.actionPermissions})})]})]})}),Q=to,F=tc,t({ForumPostCard:ta,LocationCard:G,NoteCard:tp,PhotoVideoCard:td,ReviewCard:ti,getLocationPhotos:q,getSATDModalSaveObject:K})},[t=>(i=t.jsx,a=t.jsxs,o=t.Fragment),t=>(n=t.forwardRef,r=t.useState,l=t.useMemo),t=>d=t.default,t=>c=t.useOnVisible,t=>(m=t.getItemReferenceId,s=t.useTrip,u=t.useTripMutation),t=>(p=t.TripLocationCommerceElement,h=t.CardMediaElement,v=t.CardSaveButton,b=t.CardHeaderElement,_=t.TripLocationIconContent,g=t.CardDescriptionElement,I=t.CardCommentElement),t=>(y=t.useSavesInteractionLogger,f=t.useManagementImpressionLogger),t=>C=t.default,t=>(N=t.BubbleRatingWithReviewCount,w=t.BubbleRating),t=>k=t.default,t=>S=t.default,t=>(T=t.BorderlessButton,P=t.CircularButton),t=>O=t.ReadMore,t=>(j=t.useLocalize,A=t.useIntlFormatter),t=>x=t.default,t=>M=t.PopoverMenu,t=>R=t.default,t=>D=t.default,t=>z=t.default,t=>E=t.Modal,t=>L=t.default,t=>V=t.default,t=>B=t.AddOrEditNoteModal,t=>W=t.default,t=>H=t.default,t=>U=t.useUserId]]},["121h32","1o4yt4","1essqv","13btuy","1r6ayw","19l2zs","sa2a6q","1nute5","1bkeq2","34bu7w","lr6tb6","jppfwt","wgun1f","17thqz","1mvpl5","s2gl90","fkji80","17bjcr","174j83","1i3sz5","d5rizv","x0lcjw","15h0me","155gpl","1d3i8k","52far5"]]);
