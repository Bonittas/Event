(this.$WP=this.$WP||[]).push(["1e32ha",(e,r)=>{var t,a,i,n,s,o,l,d,h,c,p,u,m,g,_,v,f,y,I,C,N,k,S,b,R,q,T,E,w,O,M,V,P,F,x,D,B,z,A,L,$,H,j,G,U,K,W,Q,Y,X,J,Z,ee,er,et,ea,ei,en,es,eo,el=e=>{e&&window.open(e.contactManagerUrl?T(e.contactManagerUrl):"","_blank")},ed=e=>{var{rental:r,trackingUid:t,partnerParams:a,locale:i,sessionCurrency:n,affiliateClickOffPriceSeenParams:s,viewportCategory:o}=e;if(r){if(e.isReadOnly){el(r);return}if(e.rapResponse&&e.rapResponse.rapData){var{isOffsiteBooking:l,subtotalNumericInSessionCurrency:d}=e.rapResponse.rapData,{tipQuoteToken:h}=e.rapResponse;if(w(!!l,r.providerOrdinal)){!function({rental:e,trackingUid:r,locale:t,amountWithCurrency:a,affiliateClickOffPriceSeenParams:i,viewportCategory:n}){if(e.providerOrdinal){var s=V(M(e.providerOrdinal),e.id,e.parentGeo.id,r);P({detailId:e.id,trackingParams:s,locale:t,checkoutSource:"property",providerOrdinal:e.providerOrdinal,amountWithCurrency:a,priceSeenAssociatedParams:i,viewportCategory:n})}}({rental:r,trackingUid:t,locale:i,amountWithCurrency:d?O(d,n):"",affiliateClickOffPriceSeenParams:s,viewportCategory:o});return}var{start:c,end:p,adults:u,children:m}=e.travelerInfo;c&&p&&h&&E({detailId:r.id,start:c,end:p,adults:u,tipQuoteToken:h,kids:m,partnerParams:a},e.onNavigatingToQuoteLink)}}},eh={quoteTitle:"NAVTy b Wg S4",priceRow:"IJKaE S4 k",boldPriceRow:"AfQML S4 k b"},ec=({label:e,price:r,bold:i})=>t("div",{className:i?eh.boldPriceRow:eh.priceRow,children:[a("div",{children:e}),a("div",{children:r})]}),ep=e=>{var{localize:r}=j(),{rapTax:i,rapConsolidatedRate:n,rapDeposit:s,rapOwnerFees:o,rapSubtotal:l}=e.rapData;return t("div",{className:e.className?e.className:null,children:[a("div",{className:eh.quoteTitle,children:r.string("ftl_quote_rates_title_14cd")}),a(ec,{label:r.string("vr_rap_subtotal_27a_pl",{0:e.stayLength}),price:n}),i?a(ec,{label:r.string("vr_fees_tax_81f"),price:i}):null,s?a(ec,{label:r.string("ftl_deposit"),price:s}):null,o?a(ec,{label:r.string("vr_owner_fees_ffffdcba"),price:o}):null,a(ec,{bold:!0,label:r.string("ftl_subtotal"),price:l})]})},eu=(e,r)=>`${0===e.roomCount?r.string("vr_studio_room"):r.string("vr_mobile_plural_bedrooms",{0:e.roomCount})}, ${e.bathCount?`${r.string("vr_mobile_plural_baths",{0:e.bathCount})}, `:""}${r.string("vr_detail_sleeps_171f",{0:e.sleepCount})}`,em=e=>{var{rapData:r}=e;return!r||!("NONE"!==r.rapBookable||r.isOffsiteBooking)},eg=e=>{var r,t=e.trim(),a=t.indexOf(" "),i=t;return a>0&&(i=t.substring(0,a),r=t.substring(a+1)),{firstName:i,lastName:r}},e_=({csrfToken:e,startDate:r,endDate:t,adults:a,...i})=>fetch("/data/1.0/vr/submitInquiry",{method:"post",credentials:"same-origin",headers:{"Content-Type":"application/json","X-Requested-By":e},body:JSON.stringify({start:c.dateToStandardString(r),end:c.dateToStandardString(t),adults:a,...i})}).then(e=>e.ok?e.json():Promise.reject(Error("failed inquiry submission!"))),ev=e=>{if(e&&e.length&&!/\d/.test(e)){var{firstName:r,lastName:t}=eg(e);return r&&r.length>0&&t&&t.length>0}return!1},ef=e=>e&&e.length,ey={container:"tjgFH",input:"SwzDH R2 z Q",inputError:"EAONK",errorText:"zYBot",nameInput:"KOrCh",messageInput:"AQnfB _V",rows:"IOKTE",managerSection:"GhXrV f",travelerInputsSection:"mDVDL",infoBelowTravelerInputs:"ucuHi f",mainSection:"TYhmi",privacyAndTermsFooter:"hQqCf",sendMessageTo:"rJPuP b",managerRightSection:"rGxwH f Fd",topSectionCopy:"smRRY b",topSectionCopyError:"uqAjb b",infoBelowTravelerInputsCell:"vuTpj",inputLabel:"yFhvo b Wg",smsRow:"yXtMx",smsLabel:"HcKwd",inputsAndPrices:"IqJXA f",inputsWrapper:"KcTNC",priceWrapper:"Tzxjn"};function eI(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var eC=e=>{var r,{localize:i}=j();r=e.propertyManager.photoUrl&&e.propertyManager.photoUrl.length?e.propertyManager.photoUrl:e.thumbnailUrl;var{name:n,localizedLanguages:s}=e.propertyManager,o=s.length>0;return t("div",{className:`${ey.managerSection} ${ey.rows}`,children:[a(B,{photoUrl:r,size:"large"}),t("div",{className:ey.managerRightSection,children:[a("div",{className:ey.sendMessageTo,children:i.string("vr_send_a_message_to",{managerName:n})}),o?t("div",{children:[i.string("vr_pm_languages_ffffdcba")," ",s]}):null,a("div",{children:eu(e,i)})]})]})},eN=()=>a(I,{in:!0,children:a("div",{className:ey.errorText,children:a(H,{id:"vr_inquiry_name_input_tip_c35"})})},"name-error"),ek=()=>a(I,{in:!0,children:a("div",{className:ey.errorText,children:a(H,{id:"vr_inquiry_email_input_tip"})})},"email-error"),eS=()=>a(I,{in:!0,children:a("div",{className:ey.errorText,children:a(H,{id:"vr_inquiry_phone_input_tip_c35"})})},"phone-error"),eb=()=>a(I,{in:!0,children:a("div",{className:ey.errorText,children:a(H,{id:"please_include_message_to_owner"})})},"messsage-error"),eR=e=>{var{localize:r}=j(),t=G();return a(X,{...e,localize:r,rentalDomainName:"https://rentals.tripadvisor.com",locale:t})},eq={speakerImage:"hTBmf",container:"AzoSY S4 f e u c",body:"wbnEO P5",header:"bXgMO f e",title:"zbBmS b",paragraph:"pEpyO S4"},eT=e=>{var{localize:r}=j();return t("div",{className:eq.container,children:[a("div",{className:eq.header,children:r("vr_inquiry_message_sent")}),t("div",{className:eq.body,children:[a(U,{className:eq.speakerImage,src:"/img2/vacationrentals/speakerphone.svg"}),a("div",{className:eq.title,children:r("vr_bookings_are_first_come_first_served")}),a("div",{className:eq.paragraph,children:r("vr_send_booking_request_urgency")}),a(D,{onClick:e.onBookNowClick,children:r("vr_book_now")}),a("div",{className:"ui_link",onClick:e.onNoThanksClick,style:{marginTop:12},children:r("vr_inquiry_no_thanks_171f")})]})]})},eE=e=>()=>{N({module:"VR",action:"VR_Inquirysent_Inquiry_VRR",destinationUrl:e})},ew=e=>{var{localize:r}=j();return t("div",{className:eq.container,children:[t("div",{className:eq.header,children:[a("div",{children:r.string("vr_inquiry_message_sent")}),a("a",{className:"ui_link",href:"/Inbox",children:r.string("vr_view_in_rental_inbox")})]}),t("div",{className:eq.body,children:[a(U,{className:eq.speakerImage,src:"/img2/vacationrentals/speakerphone.svg"}),a("div",{className:eq.title,children:r.string("vr_inquire_on_few_more_rentals")}),a("div",{className:eq.paragraph,children:r.string("vr_travelers_who_send_four_inquiries")}),a("a",{className:"ui_link",onClick:eE(e.geoLink),href:e.geoLink,style:{marginBottom:12},children:e.localizedGeoName?r.string("vr_see_similar_rentals_in_geo",{0:e.localizedGeoName}):r.string("vr_see_similar_rentals")}),a(D,{type:"secondary",onClick:e.onNoThanksClick,children:r.string("vr_inquiry_no_thanks_171f")})]})]})},eO={container:"tGbIw P5",listItem:"EhIya _r NH",sorryHeader:"b"},eM=()=>{var{localize:e}=j();return t("div",{className:eO.container,children:[t("div",{className:eO.sorryHeader,children:[a("span",{className:"ui_icon exclamation-circle"}),e.string("VRInquireSorry_171f")]}),t("div",{children:[e.string("VRInquireTechnical_171f"),e.string("VRInquireAlerted_171f")]}),t("div",{children:[a("div",{className:eO.listItem,children:e.string("VRInquireTryRefreshHint_ffffe9f1")}),a("div",{className:eO.listItem,dangerouslySetInnerHTML:{__html:e.string("VRInquireSupport_v2_ffffe9f1",{0:"/ContactUs?topic=inquiry_to_vr_owner_not_sent"})}})]}),a("div",{children:e.string("VRInquireAgain_171f")})]})},eV={__key:0x633a92b9acad,id:"633a92b9acad00a957d0580efdc377ae",loc:{},definitions:[]};function eP(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var eF=e=>{var[{rental:r,fetching:t}]=q({currencyCode:e.currencyCode,rentalId:e.locationId}),i=F();return a(J,{...e,rental:r,loading:e.loading||t,affiliateClickOffPriceSeenParams:i})},ex=({modalId:e})=>a(K,{name:e,isFullBleed:!0,children:a("div",{className:"RvRWl w f j u z",children:a(es,{})})}),eD="detail-page-inquiry-modal",eB=({children:e,fullWidth:r,variant:t="commerce",openInquiryForm:i,onClick:n,disableFormOpen:s=!1,legacyButton:o=!1})=>{var d=W(),h=Y({module:"VR_RAP_WEB_COMPONENT",action:"VR_Make_Inquiry_Failure_login_VRR"}),c=l(()=>{n?.(),s||d({flowOrigin:"login",flow:"sign_up_and_save",extraQueryParams:{contextualMessage:"vr_signin_signup_complete_inquiry"},onFailure:h}).then(i)},[s,d,n,i,h]);return o?a(D,{type:"commerce"===t?"original":t,fullwidth:r,onClick:c,children:e}):a(Q,{variant:t,fullWidth:r,onClick:c,children:e})},ez=({modalId:e=eD,...r})=>a(b,{name:e,children:e=>a(eB,{...r,openInquiryForm:e})});return[()=>{Z=ed,ec.defaultProps={bold:!1},ep.defaultProps={className:null},ee=ep,X=class extends s{getError(){var e,{startDate:r,endDate:t}=this.state;return r||t?r&&(e=new Date,r.getFullYear()===e.getFullYear()&&r.getMonth()===e.getMonth()&&r.getDate()===e.getDate())?{message:this.props.localize.string("vr_check_in_too_soon"),reason:"NO_SAME_DAY_CHECK_IN"}:this.getFirstRapError():{message:this.props.localize.string("vr_inquiry_missing_required_error_ffffdcba"),reason:"NO_DATES"}}getErrorReason(){var e=this.getError();return e?e.reason:void 0}getErrorCopy(){var e=this.getError();return e?e.message:void 0}getFirstRapError(){if(this.props.rapResponse){var{errors:e}=this.props.rapResponse;return e&&e.length?e[0]:void 0}}isCaptchaAllSet(){var{inquiryCaptchaConfig:e}=this.props;if(e){var{needCaptcha:r}=e;if(r)return!!this.state.recaptchaResponse}return!0}isInputValid(){return!this.hasRapError()&&this.isNameValid()&&this.isEmailValid()&&ef(this.state.message)&&this.isCaptchaAllSet()}hasRapError(){return!!this.getErrorReason()}isNameValid(){return ev(this.state.name)}isEmailValid(){return!this.props.showEmailInput||this.state.email&&this.state.isEmailValid}renderEmailInput(){var e=this.state.email&&!this.state.isEmailValid&&this.state.emailHasFocused&&!this.state.emailFocused;return t("div",{children:[a("div",{className:ey.inputLabel,children:this.props.localize.string("vr_inquiry_form_your_email")}),a(u,{className:`${ey.input} ${e?ey.inputError:""}`,email:this.state.email,onValidateEmail:this.onValidateEmail,onEmailChange:this.onEmailChange,onBlur:()=>{this.setState({emailFocused:!1})},onFocus:()=>{this.setState({emailHasFocused:!0,emailFocused:!0})}}),e?a(ek,{}):null]})}renderNameInput(){var e=!this.isNameValid()&&this.state.nameHasFocused&&!this.state.nameFocused;return t("div",{children:[a("div",{className:ey.inputLabel,children:this.props.localize.string("vr_full_page_inquiry_name_ffffeea6")}),a(z,{className:`${ey.input} ${ey.nameInput} ${e?ey.inputError:""}`,name:"name",value:this.state.name||"",onChange:this.onNameChange,onBlur:()=>{this.setState({nameFocused:!1})},onFocus:()=>{this.setState({nameHasFocused:!0,nameFocused:!0})}}),e?a(eN,{}):null]})}renderPhoneInput(){var e=this.state.phoneNumber&&!this.state.isPhoneNumberValid&&this.state.phoneHasFocused&&!this.state.phoneFocused;return t("div",{children:[a("div",{className:ey.inputLabel,children:this.props.localize.string("vr_full_page_inquiry_phone_ffffeea6")}),a(m,{className:`${ey.input} ${e?ey.inputError:""}`,regionCode:this.state.regionCode,regions:this.state.regions,regionsByRegionCode:this.state.regionsByRegionCode,currentCountryCode:this.state.currentCountryCode,phoneNumber:this.state.phoneNumber,onValidatePhoneNumber:this.onValidatePhoneNumber,onPhoneNumberChange:this.onPhoneNumberChange,onRegionCodeChange:this.onRegionCodeChange,onBlur:()=>{this.setState({phoneFocused:!1})},onFocus:()=>{this.setState({phoneHasFocused:!0,phoneFocused:!0})}}),e?a(eS,{}):null]})}renderSMSCheckBox(){return a("div",{className:ey.smsRow,children:t("span",{className:"ui_checkbox",children:[a("input",{id:"smsOptIn",checked:this.state.smsOptIn,onChange:this.onSMSChange,type:"checkbox"}),a("label",{className:ey.smsLabel,htmlFor:"smsOptIn",children:this.props.localize.string("vr_booking_form_sms_optin_gdpr")})]})})}renderMarketingSMSCheckBox(){return a("div",{className:ey.smsRow,children:t("span",{className:"ui_checkbox",children:[a("input",{id:"marketingSMSOptIn",checked:this.state.marketingSMSOptIn,onChange:this.onMarketingSMSChange,type:"checkbox"}),a("label",{className:ey.smsLabel,htmlFor:"marketingSMSOptIn",children:this.props.localize.string("vr_gdpr_inquiry_form_email_optin")})]})})}renderTextArea(){var{message:e,messageFocused:r,messageHasFocused:i}=this.state,n=!ef(e)&&i&&!r;return t("div",{children:[a("div",{className:ey.inputLabel,children:this.props.localize.string("vr_full_page_inquiry_message_ffffeea6")}),a(A,{className:`${ey.input} ${ey.messageInput} ${n?ey.inputError:""}`,name:"message",value:e||"",onChange:this.onMessageChange,onBlur:()=>{this.setState({messageFocused:!1})},onFocus:()=>{this.setState({messageHasFocused:!0,messageFocused:!0})}}),n?a(eb,{}):null]})}renderExtraInfo(){var{features:e}=this.props.rental,r=!!this.props.rapResponse&&!!this.props.rapResponse.rapRate&&this.props.rapResponse.rapRate.minStay,i=e.amn_all_pets_temp,n=this.props.localize.string("ftl_ask_about_pets");i&&("YES"===i.value?n=this.props.localize.string("ftl_pets_allowed"):"NO"===i.value&&(n=this.props.localize.string("ftl_pets_not_allowed")));var s=e.amn_children,o=this.props.localize.string("ftl_ask_about_kids");return s&&("YES"===s.value?o=this.props.localize.string("ftl_kid_friendly"):"NO"===s.value&&(o=this.props.localize.string("ftl_not_kid_friendly"))),t("div",{className:ey.infoBelowTravelerInputs,children:[r?a(I,{in:!0,children:a("div",{className:ey.infoBelowTravelerInputsCell,children:this.props.localize.string("vr_nights_min_stay_plural",{0:r})})},"min-stay"):null,n?a("div",{className:ey.infoBelowTravelerInputsCell,children:n}):null,o?a("div",{className:ey.infoBelowTravelerInputsCell,children:o}):null]})}renderRapError(){var e,r,t=this.getErrorCopy();return(t&&(e=t,r=t),r)?a(I,{in:!0,children:a("div",{className:t?ey.topSectionCopyError:ey.topSectionCopy,children:r})},e):null}renderCaptcha(e){return a(L,{language:e.recaptchaLang,siteKey:e.siteKey,onResponse:this.onCaptchaResponse})}render(){var{startDate:e,endDate:r,adults:i,kids:n}=this.state,{viewportCategory:s,blockingError:l,withTravelerInputsTracking:d,showEmailInput:h,inquiryCaptchaConfig:c,rentalDomainName:p,locale:u}=this.props,{showSMSCheckBox:m,showMarketingSMSCheckBox:g}=this.props.inquirySmsConfig,_="MOBILE"===s,v=this.getErrorReason(),f=`${p}/${u.replace("-","_")}`,y=`${f}/termsandconditions/traveler`,C=`${f}/privacy`;return t("div",{className:ey.container,children:[l?l(this.state,this.props):[o(eC,{...this.props.rental,key:"manager-section"}),t("div",{className:ey.travelerInputsSection,children:[this.renderRapError(),a(x,{onInputsChange:this.onInputsChange,startDate:e,endDate:r,adults:i,numberOfMonths:"DESKTOP"!==s?1:2,kids:n,errorReason:v,calendarData:this.props.calendarData,startDateOverlayAlignEdge:_?"left":void 0,endDateOverlayAlignEdge:_?"right":void 0,withTracking:d,tripSearch:!1})]},"traveler-inputs-section")],this.renderExtraInfo(),t("div",{className:ey.mainSection,children:[t("div",{className:ey.inputsAndPrices,children:[t("div",{className:ey.inputsWrapper,children:[this.renderNameInput(),h?this.renderEmailInput():null,this.renderPhoneInput(),m?this.renderSMSCheckBox():null,this.renderTextArea(),g?this.renderMarketingSMSCheckBox():null]}),!v&&this.props.rapResponse&&this.props.rapResponse.rapData?a(I,{in:!0,children:a(ee,{className:ey.priceWrapper,rapData:this.props.rapResponse.rapData,stayLength:this.props.rapResponse.view.stayLength})},JSON.stringify(this.props.rapResponse.rapData)):null]}),c&&c.needCaptcha?this.renderCaptcha(c):null,a(D,{size:_?"fullwidth":"default",disabled:!this.isInputValid(),type:"primary",onClick:this.onSendInquiry,children:this.props.localize("vr_tip_send_message_14cd")})]}),a("div",{className:ey.privacyAndTermsFooter,dangerouslySetInnerHTML:{__html:this.props.localize.string("vr_inquiry_privacy_and_terms_new_tab",{privacyLink:C,termsLink:y})}})]})}constructor(e){super(e),eI(this,"onValidatePhoneNumber",({internationalPhoneNumber:e,localNumber:r,isValid:t})=>{this.setState({phoneNumber:r,isPhoneNumberValid:t,internationalPhoneNumber:e})}),eI(this,"onValidateEmail",({isValid:e})=>{this.setState({isEmailValid:e})}),eI(this,"onPhoneNumberChange",e=>{this.setState({phoneNumber:e})}),eI(this,"onEmailChange",e=>{this.setState({email:e})}),eI(this,"onRegionCodeChange",e=>{this.setState({regionCode:e})}),eI(this,"onInputsChange",e=>{var{startDate:r,endDate:t,adults:a,pets:i,kids:n}={...this.state,...e},s={start:r,end:t,adults:a,pets:i,kids:n};s.start&&s.end&&g(s),this.props.setVrTravelerInfo(s),this.setState(e)}),eI(this,"onNameChange",(e,r)=>{this.setState({name:r})}),eI(this,"onMessageChange",(e,r)=>{this.setState({message:r})}),eI(this,"onSMSChange",e=>{this.setState({smsOptIn:e.currentTarget.checked})}),eI(this,"onMarketingSMSChange",e=>{this.setState({marketingSMSOptIn:e.currentTarget.checked})}),eI(this,"onSendInquiry",()=>{if(this.isInputValid()){var e=this.getValidInquiryInputs();e&&this.props.onSendInquiry(e)}}),eI(this,"onCaptchaResponse",e=>{this.setState({recaptchaResponse:e})}),eI(this,"getValidInquiryInputs",()=>{var{startDate:e,endDate:r,adults:t,kids:a,message:i,name:n,isPhoneNumberValid:s,isEmailValid:o,smsOptIn:l,marketingSMSOptIn:d,recaptchaResponse:h}=this.state,c=s&&this.state.internationalPhoneNumber,p=o&&this.state.email,{firstName:u,lastName:m}=eg(n);return this.props.showEmailInput&&!p?null:u&&m&&i&&e&&r?{startDate:e,endDate:r,adults:t,kids:a,message:i,email:p,firstName:u,lastName:m,phoneNumber:c,smsOptIn:!!c&&l,marketingSMSOptIn:!!c&&d,recaptchaResponse:h}:null});var{start:r,end:t,adults:a,pets:i,children:n}=e.travelerInfo,{regionCode:s,travelerName:o}=e,{smsCheckBoxChecked:l,showSMSCheckBox:d,marketingSMSChecked:h}=e.inquirySmsConfig,{regions:c,regionsByRegionCode:p,currentCountryCode:u}=_(e.regionCodeConfig);this.state={name:o||"",nameHasFocused:!!o,startDate:r?new Date(r):null,endDate:t?new Date(t):null,adults:a,pets:i,kids:n,regionCode:s,smsOptIn:l&&d,marketingSMSOptIn:h,internationalPhoneNumber:"",isPhoneNumberValid:!0,isEmailValid:!0,regions:c,regionsByRegionCode:p,currentCountryCode:u}}},eI(X,"defaultProps",{inquirySmsConfig:{showSMSCheckBox:!0,smsCheckBoxChecked:!0,showMarketingSMSCheckBox:!0,marketingSMSChecked:!0}}),er=$(e=>({viewportCategory:e.meta.device.viewportCategory}))(eR),et=eT,ew.defaultProps={localizedGeoName:null},ea=ew,ei=eM,en={submitted:!1,savedInquiryInputs:void 0,error:!1,recaptchaResponse:void 0,inquiryId:void 0},J=class extends s{shouldComponentUpdate(e){return!(e.loading&&this.props.rental)}componentDidUpdate(e){if(e.travelerInfo!==this.props.travelerInfo&&this.props.travelerInfo){var{start:r,end:t,adults:a,children:i,pets:n}=this.props.travelerInfo;r&&t&&g({start:new Date(r),end:new Date(t),adults:a,kids:i,pets:n})}}renderSubmittedView(){var{props:e}=this;return a(S,{children:r=>a(I,{in:!0,children:t(i,{children:[this.isInquiryOnly()&&e.rental?a(ea,{onNoThanksClick:r,localizedGeoName:e.rental.parentGeo.name,geoLink:e.rental.parentGeo.url}):a(et,{onBookNowClick:this.goToCheckOut,onNoThanksClick:r}),this.props.marketingOptions?a(R,{title:"inquiry-form-remarketing-success",marketingOptions:{...this.props.marketingOptions,pixelType:"LIGHTBOX_CLICKOUT",vrInquiryId:this.state.inquiryId}}):null]})},"submitted")})}renderForm(){var{error:e}=this.state,r=e?ei:null;return a(d,{query:eV,children:({data:e,fetching:n})=>{if(n)return a(k,{});e&&e.fullName&&ev(e.fullName.fullName)&&(s=e.fullName.fullName);var s,o={onSendInquiry:this.onSendInquiry,blockingError:r,travelerName:s,showEmailInput:!1};return t(i,{children:[a(er,{...this.props,...o,withTravelerInputsTracking:!0}),a(R,{title:"inquiry-form-remarketing",marketingOptions:{...this.props.marketingOptions,pixelType:"LIGHTBOX_CLICK"}})]})}})}render(){var{props:e}=this;return e.loading?a(k,{}):e.rental?this.state.submitted?this.renderSubmittedView():this.renderForm():null}constructor(...e){super(...e),eP(this,"state",en),eP(this,"onSendInquiry",e=>{var{isMember:r}=this.props;C({module:"VR",action:"VR_Next_LightBox_VRR"}),this.setState({savedInquiryInputs:e},()=>{r&&this.sendInquiry().then(({inquiryId:e})=>{this.setState({submitted:!0,inquiryId:e})}).catch(()=>{this.setState({...en,error:!0})})})}),eP(this,"isInquiryOnly",()=>{var{rapResponse:e}=this.props;return!e||em(e)}),eP(this,"sendInquiry",()=>{var{savedInquiryInputs:e}=this.state,{csrfToken:r,rental:t}=this.props;if(e&&t){var a=y();return e_({csrfToken:r,locationId:t.id,...e,partnerParams:a})}return Promise.reject(Error("missing savedInquiryInputs!"))}),eP(this,"goToCheckOut",()=>{var{rapResponse:e,rental:r,locationId:t,readonlyMode:a,travelerInfo:i,locale:n,currencyCode:s,affiliateClickOffPriceSeenParams:o}=this.props;e&&r&&t&&a&&i&&Z({rapResponse:e,isReadOnly:a,detailId:t,rental:r,travelerInfo:i,onNavigatingToQuoteLink:e=>{N({module:"VR",action:"VR_InquiryBRImpression_VRR",destinationUrl:e})},partnerParams:y(),locale:n,sessionCurrency:s,affiliateClickOffPriceSeenParams:o})})}},es=h({data:(e,r)=>{var{detail:t}=e.route,a=e.travelerInfo.vr,i=a&&v(a,parseInt(t,10),e.auth.csrfToken,e.travelerInfo.preferences.currency),n=i?r(i):null,s=r(`/data/1.0/vr/rental/calendarData/${t}`),o=r("/data/1.0/vr/inquiry/captchaConfig"),l=r("/data/1.0/vr/inquiry/smsConfig"),d=r(f),{readonlyMode:h}=e.meta,c={servlet:"VacationRentalInquiry"};return()=>({rental:null,rapResponse:n&&n.get().data,inquiryCaptchaConfig:o.get().data,inquirySmsConfig:l.get().data,regionCodeConfig:d.get().data,travelerInfo:a,loading:o.get().loading||l.get().loading||d.get().loading||!!n&&n.get().loading||s.get().loading,readonlyMode:h,locationId:t||0,marketingOptions:c,calendarData:s.get().data,csrfToken:e.auth.csrfToken,isMember:e.auth.isMember,loggedInUserId:e.auth.loggedInUserId,locale:e.i18n.locale,currencyCode:e.travelerInfo.preferences.currency})},actions:{setVrTravelerInfo:p.travelerInfo.setVrTravelerInfo}})(eF),eo=ex,e({ConnectedInquiryForm:es,ConnectedModalInquiryForm:eo,InquiryButton:n.memo(ez),MODAL_ID:eD})},[e=>(t=e.jsxs,a=e.jsx,i=e.Fragment),e=>(n=e.default,s=e.Component,o=e.createElement,l=e.useCallback),e=>d=e.Query,e=>h=e.bind,e=>(c=e.vrUtils,p=e.actions),e=>(u=e.EmailInput,m=e.PhoneInput,g=e.persistTravelerInfo,_=e.mapRegionCodeResponseForDropdown,v=e.getRapUrl,f=e.REGION_CODE_DATA_GET,y=e.tryGettingPartnerReference),e=>I=e.default,e=>(C=e.default,N=e.trackEventCookie),e=>k=e.LoadingSpinner,e=>(S=e.Closer,b=e.Opener),e=>R=e.PageMonikerIframe,e=>q=e.useJerseyDetailRentalData,e=>T=e.default,e=>E=e.runLegacyBookingRequestFlow,e=>(w=e.shouldUseCheckout,O=e.createAffiliateAmountQueryParam,M=e.createPDPAffiliateTrackingAction,V=e.createAffiliateTracking,P=e.affiliateCheckOut,F=e.usePriceSeenValidationParams),e=>x=e.TravelerInputsPicker,e=>D=e.default,e=>B=e.Avatar,e=>z=e.ManagedTextInput,e=>A=e.ManagedTextArea,e=>L=e.Recaptcha,e=>$=e.connect,e=>(H=e.default,j=e.useLocalize,G=e.useLocale),e=>U=e.CdnImage,e=>K=e.Modal,e=>W=e.default,e=>Q=e.default,e=>Y=e.useGARecordCallback]]},["121h32","1o4yt4","1mqwhq","16z5q2","45ddp0","xlpvch","1kcvbr","4axon3","1l9qeu","80hn7v","1chtw0","189zkc","1j8lyt","1iroa0","68adql","1abxv6","4nzso8","dl4tf4","uovzt8","1afpmu","4t9rlo","12mj4n","17thqz","1s6q22","18m6oj","lchj5q","jppfwt","32pwc7"]]);
