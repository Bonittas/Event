(this.$WP=this.$WP||[]).push(["196t94",(e,t)=>{var n,i,o,r,a,s,l,c,u,d,p,g,m,v,f,h,_,b,y,S,k,B,T,P,C,w,L,N,x,M,F,I,K,R,j,E,q=()=>{var{localize:e}=l(),t=()=>e("soft_login_banner_text");return i("div",{className:"iBiJj",children:[n(c,{variant:"title-05",display:"inline",children:e("soft_login_banner_title")}),n("div",{className:"EblnO",children:n(c,{variant:"supporting-01",display:"inline",marginLeft:"spacing-00",marginTop:"spacing-01",children:t()})}),n("div",{className:"iWkln",children:n(c,{variant:"title-06",display:"inline",marginLeft:"spacing-01",marginTop:"spacing-00",children:t()})})]})},D=()=>n("div",{className:"bKtFP",children:n(r,{size:"small",variant:"primary",children:n(s,{id:"soft_login_banner_button"})})}),A=()=>{var e=u(),t=b(),r=y(),{funnelKey:a}=d(h),s=w(),{bucket:l}=B({pause:!1,skipImpression:!0}),{bucket:c}=T({pause:!1,logImpression:!1}),{hotels:m,attractions:v}=k(),f=p(()=>{var e={variant:c||l};if("HotelsFusion"===s){var t=!!(m?.checkInDate&&m?.checkOutDate&&!m?.defaultDates);return{...e,isDated:t}}if(K.has(s)){var n=!!(v?.fromDate&&v?.toDate);return{...e,isDated:n}}return e},[l,c,s,m,v]),P=S(15e3,"SoftLoginBanner","MembershipBounce15s",t,a,f),C=S(3e4,"SoftLoginBanner","MembershipBounce30s",t,a,f),L=_(()=>{t({impressionKey:a,itemName:"SoftLoginBanner",itemType:"MembershipBanner",customData:f}),P(),C()}),N=g(()=>{r({impressionKey:a,itemName:"SoftLoginBanner",itemType:"MembershipBanner",actionType:"click",actionSubType:"cta",customData:f}),e({flowOrigin:"login",isFullWidthMobile:!0,onSuccess:e=>{t({customData:{...f,newMember:!!e?.hasCreatedMember},impressionKey:a,itemName:"SuccessfulLogin",itemType:"MemberLoginFlow"})},onClose:()=>{r({impressionKey:a,itemType:"MembershipPrompt",itemName:"SoftLoginBanner",actionType:"click",actionSubType:"close",customData:f})}})},[r,e,t,f,a]);return i("div",{className:"ZMdlv Pj PX Pw PJ _S f Fi",role:"link",onClick:N,onKeyPress:N,tabIndex:0,ref:L,children:[n(o,{className:"ZSNFY",src:"img2/brand_refresh/Tripadvisor_logoset_solid_white.svg",alt:"Tripadvisor logo"}),i("div",{className:"emVeP",children:[n(I,{}),n(D,{})]})]})},O={overlay:"onZPv _S f H e _V Ra Gg _s Pk PY Px PK",closeButtonContainer:"f k",closeButton:"lrXUp _T",saveButton:"fHVdP _m Mj"},W=({onClose:e,reference:t})=>{var{localize:i}=l();return n("span",{className:O.closeButton,children:n(a,{icon:L,size:"small",onClick:t=>{t.stopPropagation(),e()},"aria-label":i.string("tooltip_close"),ref:t})})},z=({onClose:e,onClick:t,title:o,text:a,buttonText:s,reference:l})=>{var u=m(null);return i("div",{ref:l,className:O.overlay,onClick:t,role:"presentation",children:[i("div",{className:O.closeButtonContainer,children:[n(c,{elementType:"div",variant:"title-04",marginBottom:"spacing-02",children:o}),n(W,{onClose:e,reference:u})]}),n("div",{children:a}),!!s&&n("div",{children:n("div",{className:O.saveButton,children:n(r,{fullWidth:!0,children:s})})})]})},X=({triggerRef:e,onClick:t,title:i,text:o,buttonText:r,position:a,alignEdge:s,shiftX:l,shiftY:c,shiftArrow:u,hideOnScrollX:S,hideOnScrollY:B,autoFocus:T,isUpdatedOnScroll:L,skipSessionCheck:I,softLoginExperiment:K,dismiss:R,isTriggerRefStickied:E})=>{var q,D,A,O=m(null),[W,X]=v(!1),[Y,H]=v(e.current?.getBoundingClientRect().left),[U,V]=v(e.current?.getBoundingClientRect().top),G=P(K,I),Z=C(K),[$,J]=v(!!E?.current),Q=b(),ee=y(),{funnelKey:et}=d(h),en=w(),{attractions:ei}=k();switch(K){case"heart_icon":q="heart_icon_prompt",D="SoftLoginSave",A="SaveModalPrompt";break;case"global_nav_review":q="review_global_nav_prompt",D="SoftLoginReview",A="ReviewGlobalNavPrompt";break;case"global_nav_sign_in":q="sign_in_global_nav_prompt",D="SoftLoginSignIn",A="SignInGlobalNavPrompt";break;default:throw F(K),Error(`Experiment not considered ${K}`)}var eo=p(()=>{var e={variant:q};if(j.has(en)){var t=!!(ei?.fromDate&&ei?.toDate);return{...e,isDated:t}}return e},[q,en,ei]),er=_(()=>{W&&Q({impressionKey:et,itemName:D,itemType:A,customData:eo})});f(()=>X(G),[G]),f(()=>{H(e.current?.getBoundingClientRect().left),V(e.current?.getBoundingClientRect().top)},[e]),f(()=>{W&&Z()});var ea=g(()=>{X(!1),R?.()},[R]);x("Escape",ea);var es=t=>{var n=e.current?.getBoundingClientRect().left!==Y,i=e.current?.getBoundingClientRect().top!==U;("wheel"===t.type||"scroll"===t.type||"touchmove"===t.type)&&(S&&n||B&&i)&&ea();var o=!!E?.current;E&&o!==$&&J(o)};M("click",e=>{"click"===e.type&&e.target instanceof Node&&!O.current?.contains(e.target)&&ea()},void 0),M("wheel",es,void 0),M("scroll",es,void 0),M("touchmove",es,void 0);var el=n("div",{ref:er,children:n(z,{onClose:g(()=>{ea(),ee({impressionKey:et,itemName:D,itemType:A,actionType:"click",actionSubType:"close",customData:eo})},[ea,ee,et,D,A,eo]),onClick:g(()=>{ea(),ee({impressionKey:et,itemName:D,itemType:A,actionType:"click",actionSubType:"cta",customData:eo}),t()},[ea,ee,et,D,A,eo,t]),title:i,text:o,buttonText:r,reference:O})});return(f(()=>{e.current||R?.()},[e,R]),e.current)?W&&n("div",{children:n(N,{target:e.current,position:a,alignEdge:s,shiftX:l,shiftY:c,shiftArrow:u,unstyled:!0,showArrowWhenUnstyled:!0,autoFocus:!!T,isUpdatedOnScroll:!!L,fixed:$,children:el})}):null},Y=({triggerRef:e,onSave:t,position:i,alignEdge:o,shiftX:r,shiftY:a,shiftArrow:s,hideOnScrollX:c,hideOnScrollY:u})=>{var{localize:d}=l();return n(E,{triggerRef:e,onClick:t,title:d.string("soft_login_heart_icon_tooltip_title"),text:d.string("soft_login_heart_icon_tooltip_text"),buttonText:d.string("soft_login_heart_icon_tooltip_save_button"),position:i,alignEdge:o,shiftX:r,shiftY:a,shiftArrow:s,hideOnScrollX:c,hideOnScrollY:u,autoFocus:!0,softLoginExperiment:"heart_icon"})};return[()=>{I=q,K=new Set(["AttractionsFusion","AttractionProductsFusion"]),R=A,j=new Set(["AttractionsFusion"]),e({SaveTooltip:Y,SoftLoginBanner:R,SoftLoginTooltip:E=X})},[e=>(n=e.jsx,i=e.jsxs),e=>o=e.CdnImage,e=>(r=e.default,a=e.CircularButton),e=>(s=e.default,l=e.useLocalize),e=>c=e.default,e=>u=e.default,e=>(d=e.useContext,p=e.useMemo,g=e.useCallback,m=e.useRef,v=e.useState,f=e.useEffect),e=>h=e.FunnelTracking,e=>_=e.useOnVisible,e=>(b=e.useSoftLoginImpression,y=e.useSoftLoginInteraction),e=>S=e.useBounceTracking,e=>k=e.useTravelInfo,e=>(B=e.useListPageMembershipBannerBucket,T=e.useMembershipBannerAndHeartIconBucket,P=e.useIsSoftLoginPromptSessionEligible,C=e.useUpdateSoftLoginPromptSessions),e=>w=e.default,e=>L=e.default,e=>N=e.default,e=>x=e.useKeyboardEvent,e=>M=e.useWindow,e=>F=e.exhaustivenessCheck]]},["121h32","1s6q22","jppfwt","17thqz","1essqv","lchj5q","1o4yt4","1kkqcv","13btuy","1degzg","yau6qy","1etaac","1rfo7h","eqoaya","1qkjm8","1x9dv9","1gttbj","ltllz9","a2qxj9"]]);
